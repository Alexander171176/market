import{y as H,u as L,T as O,z as q,l as j,e as h,o as x,w as c,f as o,i as s,p as f,t as m,k as e,A as $,m as P,n as y,B as w,I as K,ar as G,q as J}from"./vendor-CMULZhQa.js";import{_ as Q,t as R}from"./MetatagsButton-DFHL53iq.js";import{A as W}from"./AdminLayout-BMfLiLo0.js";import{T as X}from"./TitlePage-DOI2IMRH.js";import{_ as I}from"./DefaultButton-CB_WTPCQ.js";import{_ as Y}from"./PrimaryButton-BQKaB6gG.js";import{_ as Z}from"./ClearMetaButton-BG4n4BXu.js";import{_ as g,a as b,b as T}from"./InputNumber-BKnpntqH.js";import{_ as B}from"./MetaDescTextarea-BqXrk_pu.js";import{_ as n,a as _}from"./InputText-BO1leBMl.js";import{_ as u}from"./InputError-B8v-5UJo.js";import{_ as ee,a as te}from"./TinyEditor-zoGYMinn.js";import{_ as le}from"./MultiImageUpload-B1nZ7a18.js";import{_ as se}from"./MultiImageEdit-BcZmVenZ.js";import{_ as oe}from"./VideoSourceFields-DlGwLBlN.js";/* empty css                                                                     */import"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-3g6-h99u.js";import"./sidebarIcons-D5nT6JI0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-BBt1gw6L.js";import"./ScrollButtons-DjRj6zOj.js";import"./app-BmuzEqX8.js";import"./auth-image-XbvYdkSi.js";const ae={class:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-12xl mx-auto"},ie={class:"p-4 bg-slate-50 dark:bg-slate-700 border border-blue-400 dark:border-blue-200 shadow-lg shadow-gray-500 dark:shadow-slate-400 bg-opacity-95 dark:bg-opacity-95"},re={class:"sm:flex sm:justify-between sm:items-center mb-2"},de=o("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[o("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),me=o("div",{class:"grid grid-flow-col sm:auto-cols-max justify-start sm:justify-end gap-2"},null,-1),ne={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},ue={class:"flex flex-row items-center gap-2"},ce={class:"flex flex-row items-center gap-2 w-auto"},fe={class:"flex flex-row items-center gap-2"},_e={class:"h-8 flex items-center"},pe={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},ve={class:"flex flex-row items-center gap-2"},xe={class:"flex flex-row items-center gap-2"},ge={class:"flex flex-row items-center gap-2"},be={class:"mb-3 flex flex-col items-start"},he={class:"mb-3 flex flex-col items-start"},ye={class:"mb-3 flex flex-col items-start"},we=o("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),Ve={class:"mb-3 flex flex-col items-start"},ke=o("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),Ue={class:"mb-3 flex flex-col items-start"},Me={class:"flex justify-between w-full"},je={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},$e={class:"mb-3 flex flex-col items-start"},Ie={class:"mb-3 flex flex-col lg:flex-row sm:justify-between sm:space-x-4"},Te={class:"flex flex-col lg:flex-row items-center mb-2 lg:mb-0 flex-1"},Be={class:"flex flex-col lg:flex-row items-center mb-2 lg:mb-0 flex-1"},ze={class:"mb-3 flex flex-col lg:flex-row lg:justify-between lg:space-x-4"},Ce={class:"flex flex-col lg:flex-row items-center mb-2 lg:mb-0 flex-1"},De={value:"local"},Se={value:"youtube"},Ae={value:"vimeo"},Fe={value:"code"},Ne={class:"flex flex-col lg:flex-row items-center mb-2 lg:mb-0 flex-1 justify-between"},Ee={class:"flex flex-col items-start"},He={key:0,class:"mt-4"},Le=["innerHTML"],Oe={class:"mb-3 flex flex-col items-start"},qe={class:"mb-3 flex flex-col items-start"},Pe={class:"flex justify-between w-full"},Ke={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Ge={class:"mb-3 flex flex-col items-start"},Je={class:"flex justify-between w-full"},Qe={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Re={class:"mb-3 flex flex-col items-start"},We={class:"flex justify-between w-full"},Xe={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Ye={class:"flex justify-end mt-4"},Ze=o("svg",{class:"w-4 h-4 fill-current text-gray-500 shrink-0 mr-2",viewBox:"0 0 16 16"},[o("path",{d:"M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm3 9H5V7h6v2z"})],-1),et=o("svg",{class:"w-4 h-4 fill-current text-slate-600 shrink-0 mr-2",viewBox:"0 0 16 16"},[o("path",{d:"M13 7h2v6a1 1 0 01-1 1H4v2l-4-3 4-3v2h9V7zM3 9H1V3a1 1 0 011-1h10V0l4 3-4 3V4H3v5z"})],-1),tt={class:"mt-4"},lt={class:"mt-4"},st={class:"flex items-center justify-center mt-4"},ot=o("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[o("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c-.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2 .8-6.4z"})],-1),at=o("svg",{class:"w-4 h-4 fill-current text-slate-100",viewBox:"0 0 16 16"},[o("path",{d:"M14.3 2.3L5 11.6 1.7 8.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4l4 4c.2.2.4.3.7.3.3 0 .5-.1.7-.3l10-10c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0z"})],-1),Tt={__name:"Edit",props:{video:{type:Object,required:!0},video_url:String,sections:Array,articles:Array,related_videos:{type:Array,default:()=>[]}},setup(v){const V=H(),{t:r}=L(),d=v,t=O({_method:"PUT",sort:d.video.sort??0,locale:d.video.locale??"",title:d.video.title??"",url:d.video.url??"",short:d.video.short??"",description:d.video.description??"",author:d.video.author??"",published_at:d.video.published_at?new Date(d.video.published_at).toISOString().split("T")[0]:"",duration:d.video.duration??"",source_type:d.video.source_type??"",meta_title:d.video.meta_title??"",meta_keywords:d.video.meta_keywords??"",meta_desc:d.video.meta_desc??"",activity:!!d.video.activity,left:!!d.video.left,main:!!d.video.main,right:!!d.video.right,sections:d.video.sections??[],articles:d.video.articles??[],related_videos:d.video.related_videos??[],deletedImages:[],embed_code:d.video.source_type==="code"?d.video.embed_code:"",video_url:d.video_url??"",external_video_id:d.video.external_video_id??"",video_file:null}),z=i=>{if(!i)return"";const l=new Date(i);return isNaN(l.getTime())?"":l.toISOString().split("T")[0]};q(()=>{t.published_at&&(t.published_at=z(t.published_at))});const p=j((d.video.images||[]).filter(i=>i.url).map(i=>({id:i.id,url:i.webp_url||i.url,order:i.order||0,alt:i.alt||"",caption:i.caption||""}))),k=j([]),C=i=>{p.value=i},D=i=>{t.deletedImages.includes(i)||t.deletedImages.push(i),p.value=p.value.filter(l=>l.id!==i)},S=i=>{k.value=i},A=()=>{t.title&&(t.url=R(t.title.toLowerCase()))},U=(i,l,a=!1)=>{if(i.length<=l)return i;const M=i.substr(0,i.lastIndexOf(" ",l));return a?`${M}...`:M},F=()=>{t.meta_title="",t.meta_keywords="",t.meta_desc=""},N=()=>{if(t.title&&!t.meta_title&&(t.meta_title=U(t.title,160)),t.short&&!t.meta_keywords){const i=t.short.replace(/(<([^>]+)>)/gi,"");t.meta_keywords=i.split(/\s+/).filter(l=>l.length>0).join(", ")}t.short&&!t.meta_desc&&(t.meta_desc=U(t.short.replace(/(<([^>]+)>)/gi,""),255,!0))},E=()=>{t.transform(i=>({...i,activity:i.activity?1:0,left:i.left?1:0,main:i.main?1:0,right:i.right?1:0,images:[...k.value.map(l=>({file:l.file,order:l.order,alt:l.alt,caption:l.caption})),...p.value.map(l=>({id:l.id,order:l.order,alt:l.alt,caption:l.caption}))],deletedImages:t.deletedImages})),t.post(route("admin.videos.update",d.video.id),{preserveScroll:!0,forceFormData:!0,onSuccess:i=>{V.success("Видео успешно обновлено!")},onError:i=>{console.error("❌ Ошибка при обновлении статьи:",i);const l=i[Object.keys(i)[0]];V.error(l||"Пожалуйста, проверьте правильность заполнения полей.")}})};return(i,l)=>(x(),h(W,{title:e(r)("editVideo")},{header:c(()=>[s(X,null,{default:c(()=>[f(m(e(r)("editVideo"))+": "+m(d.video.title),1)]),_:1})]),default:c(()=>[o("div",ae,[o("div",ie,[o("div",re,[s(I,{href:i.route("admin.videos.index")},{icon:c(()=>[de]),default:c(()=>[f(" "+m(e(r)("back")),1)]),_:1},8,["href"]),me]),o("form",{onSubmit:$(E,["prevent"]),enctype:"multipart/form-data",class:"p-3 w-full"},[o("div",ne,[o("div",ue,[s(g,{modelValue:e(t).activity,"onUpdate:modelValue":l[0]||(l[0]=a=>e(t).activity=a)},null,8,["modelValue"]),s(b,{for:"activity",text:e(r)("activity"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),o("div",ce,[s(ee,{modelValue:e(t).locale,"onUpdate:modelValue":l[1]||(l[1]=a=>e(t).locale=a),errorMessage:e(t).errors.locale},null,8,["modelValue","errorMessage"]),s(u,{class:"mt-2 lg:mt-0",message:e(t).errors.locale},null,8,["message"])]),o("div",fe,[o("div",_e,[s(n,{for:"sort",value:e(r)("sort"),class:"text-sm"},null,8,["value"])]),s(T,{id:"sort",type:"number",modelValue:e(t).sort,"onUpdate:modelValue":l[2]||(l[2]=a=>e(t).sort=a),autocomplete:"sort",class:"w-full lg:w-28"},null,8,["modelValue"]),s(u,{class:"mt-2 lg:mt-0",message:e(t).errors.sort},null,8,["message"])])]),o("div",pe,[o("div",ve,[s(g,{modelValue:e(t).left,"onUpdate:modelValue":l[3]||(l[3]=a=>e(t).left=a)},null,8,["modelValue"]),s(b,{for:"left",text:e(r)("left"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),o("div",xe,[s(g,{modelValue:e(t).main,"onUpdate:modelValue":l[4]||(l[4]=a=>e(t).main=a)},null,8,["modelValue"]),s(b,{for:"main",text:e(r)("main"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),o("div",ge,[s(g,{modelValue:e(t).right,"onUpdate:modelValue":l[5]||(l[5]=a=>e(t).right=a)},null,8,["modelValue"]),s(b,{for:"right",text:e(r)("right"),class:"text-sm h-8 flex items-center"},null,8,["text"])])]),o("div",be,[s(n,{for:"sections",value:e(r)("sections"),class:"mb-1"},null,8,["value"]),s(e(w),{modelValue:e(t).sections,"onUpdate:modelValue":l[6]||(l[6]=a=>e(t).sections=a),options:v.sections,multiple:!0,"close-on-select":!0,placeholder:e(r)("select"),label:"title","track-by":"title"},null,8,["modelValue","options","placeholder"])]),o("div",he,[s(n,{for:"articles",value:e(r)("articles"),class:"mb-1"},null,8,["value"]),s(e(w),{modelValue:e(t).articles,"onUpdate:modelValue":l[7]||(l[7]=a=>e(t).articles=a),options:v.articles,multiple:!0,"close-on-select":!0,placeholder:e(r)("select"),label:"title","track-by":"title"},null,8,["modelValue","options","placeholder"])]),o("div",ye,[s(n,{for:"title"},{default:c(()=>[we,f(" "+m(e(r)("name")),1)]),_:1}),s(_,{id:"title",type:"text",modelValue:e(t).title,"onUpdate:modelValue":l[8]||(l[8]=a=>e(t).title=a),required:"",autocomplete:"title"},null,8,["modelValue"]),s(u,{class:"mt-2",message:e(t).errors.title},null,8,["message"])]),o("div",Ve,[s(n,{for:"url"},{default:c(()=>[ke,f(" "+m(e(r)("url")),1)]),_:1}),s(_,{id:"url",type:"text",modelValue:e(t).url,"onUpdate:modelValue":l[9]||(l[9]=a=>e(t).url=a),required:"",autocomplete:"url",onFocus:A},null,8,["modelValue"]),s(u,{class:"mt-2",message:e(t).errors.url},null,8,["message"])]),o("div",Ue,[o("div",Me,[s(n,{for:"short",value:e(r)("shortDescription")},null,8,["value"]),o("div",je,m(e(t).short.length)+" / 255 "+m(e(r)("characters")),1)]),s(B,{modelValue:e(t).short,"onUpdate:modelValue":l[10]||(l[10]=a=>e(t).short=a),class:"w-full"},null,8,["modelValue"]),s(u,{class:"mt-2",message:e(t).errors.short},null,8,["message"])]),o("div",$e,[s(n,{for:"description",value:e(r)("description")},null,8,["value"]),s(te,{modelValue:e(t).description,"onUpdate:modelValue":l[11]||(l[11]=a=>e(t).description=a),height:500},null,8,["modelValue"]),s(u,{class:"mt-2",message:e(t).errors.description},null,8,["message"])]),o("div",Ie,[o("div",Te,[s(n,{for:"published_at",value:e(r)("publishedAt"),class:"mb-1 lg:mb-0 lg:mr-2"},null,8,["value"]),s(_,{id:"published_at",type:"date",modelValue:e(t).published_at,"onUpdate:modelValue":l[12]||(l[12]=a=>e(t).published_at=a),autocomplete:"published_at",class:"w-full max-w-56"},null,8,["modelValue"]),s(u,{class:"mt-1 sm:mt-0",message:e(t).errors.published_at},null,8,["message"])]),o("div",Be,[s(n,{for:"author",value:e(r)("postAuthor"),class:"w-40 mb-1 lg:mb-0 lg:mr-2"},null,8,["value"]),s(_,{id:"author",type:"text",modelValue:e(t).author,"onUpdate:modelValue":l[13]||(l[13]=a=>e(t).author=a),autocomplete:"author",class:"w-full"},null,8,["modelValue"]),s(u,{class:"mt-1 sm:mt-0",message:e(t).errors.author},null,8,["message"])])]),o("div",ze,[o("div",Ce,[s(n,{for:"source_type",value:e(r)("sourceType"),class:"mb-1 lg:mb-0 lg:mr-2"},null,8,["value"]),K(o("select",{id:"source_type","onUpdate:modelValue":l[14]||(l[14]=a=>e(t).source_type=a),class:"form-select px-2 py-0.5 min-w-[12rem] font-semibold text-sm rounded-sm shadow-sm dark:bg-cyan-800 dark:text-slate-100 border-slate-500 focus:border-indigo-500 focus:ring-indigo-300"},[o("option",De,m(e(r)("local")),1),o("option",Se,m(e(r)("youtube")),1),o("option",Ae,m(e(r)("vimeo")),1),o("option",Fe,m(e(r)("code")),1)],512),[[G,e(t).source_type]]),s(u,{class:"mt-1 lg:mt-0",message:e(t).errors.source_type},null,8,["message"])]),o("div",Ne,[s(n,{for:"duration",value:e(r)("duration"),class:"mb-1 lg:mb-0 lg:mr-2"},null,8,["value"]),s(T,{id:"duration",type:"number",modelValue:e(t).duration,"onUpdate:modelValue":l[15]||(l[15]=a=>e(t).duration=a),autocomplete:"duration",class:"w-full max-w-24"},null,8,["modelValue"]),s(u,{class:"mt-1 lg:mt-0",message:e(t).errors.duration},null,8,["message"])])]),o("div",Ee,[s(oe,{modelValue:e(t).source_type,"onUpdate:modelValue":l[16]||(l[16]=a=>e(t).source_type=a),"video-url":e(t).video_url,"onUpdate:videoUrl":l[17]||(l[17]=a=>e(t).video_url=a),"external-video-id":e(t).external_video_id,"onUpdate:externalVideoId":l[18]||(l[18]=a=>e(t).external_video_id=a),"video-file":e(t).video_file,"onUpdate:videoFile":l[19]||(l[19]=a=>e(t).video_file=a),"embed-code":e(t).embed_code,"onUpdate:embedCode":l[20]||(l[20]=a=>e(t).embed_code=a)},null,8,["modelValue","video-url","external-video-id","video-file","embed-code"]),e(t).errors.embed_code?(x(),h(u,{key:0,class:"mt-2",message:e(t).errors.embed_code},null,8,["message"])):y("",!0),e(t).errors.external_video_id?(x(),h(u,{key:1,class:"mt-2",message:e(t).errors.external_video_id},null,8,["message"])):y("",!0)]),e(t).source_type==="code"&&e(t).embed_code?(x(),P("div",He,[s(n,{value:e(r)("view"),class:"mb-1"},null,8,["value"]),o("div",{innerHTML:e(t).embed_code,class:"border rounded p-4 bg-white dark:bg-slate-800"},null,8,Le)])):y("",!0),o("div",Oe,[s(n,{for:"related_videos",value:e(r)("relatedVideos"),class:"mb-1"},null,8,["value"]),s(e(w),{modelValue:e(t).related_videos,"onUpdate:modelValue":l[21]||(l[21]=a=>e(t).related_videos=a),options:v.related_videos,multiple:!0,"close-on-select":!0,placeholder:e(r)("select"),label:"title","track-by":"title"},null,8,["modelValue","options","placeholder"]),s(u,{class:"mt-2",message:e(t).errors.related_videos},null,8,["message"])]),o("div",qe,[o("div",Pe,[s(n,{for:"meta_title",value:e(r)("metaTitle")},null,8,["value"]),o("div",Ke,m(e(t).meta_title.length)+" / 160 "+m(e(r)("characters")),1)]),s(_,{id:"meta_title",type:"text",modelValue:e(t).meta_title,"onUpdate:modelValue":l[22]||(l[22]=a=>e(t).meta_title=a),maxlength:"160",autocomplete:"url"},null,8,["modelValue"]),s(u,{class:"mt-2",message:e(t).errors.meta_title},null,8,["message"])]),o("div",Ge,[o("div",Je,[s(n,{for:"meta_keywords",value:e(r)("metaKeywords")},null,8,["value"]),o("div",Qe,m(e(t).meta_keywords.length)+" / 255 "+m(e(r)("characters")),1)]),s(_,{id:"meta_keywords",type:"text",modelValue:e(t).meta_keywords,"onUpdate:modelValue":l[23]||(l[23]=a=>e(t).meta_keywords=a),maxlength:"255",autocomplete:"url"},null,8,["modelValue"]),s(u,{class:"mt-2",message:e(t).errors.meta_keywords},null,8,["message"])]),o("div",Re,[o("div",We,[s(n,{for:"meta_desc",value:e(r)("metaDescription")},null,8,["value"]),o("div",Xe,m(e(t).meta_desc.length)+" / 200 "+m(e(r)("characters")),1)]),s(B,{modelValue:e(t).meta_desc,"onUpdate:modelValue":l[24]||(l[24]=a=>e(t).meta_desc=a),maxlength:"200",class:"w-full"},null,8,["modelValue"]),s(u,{class:"mt-2",message:e(t).errors.meta_desc},null,8,["message"])]),o("div",Ye,[s(Z,{onClear:F,class:"mr-4"},{default:c(()=>[Ze,f(" "+m(e(r)("clearMetaFields")),1)]),_:1}),s(Q,{onClick:$(N,["prevent"])},{icon:c(()=>[et]),default:c(()=>[f(" "+m(e(r)("generateMetaTags")),1)]),_:1})]),o("div",tt,[s(se,{images:p.value,"onUpdate:images":C,onDeleteImage:D},null,8,["images"])]),o("div",lt,[s(le,{"onUpdate:images":S})]),o("div",st,[s(I,{href:i.route("admin.videos.index"),class:"mb-3"},{icon:c(()=>[ot]),default:c(()=>[f(" "+m(e(r)("back")),1)]),_:1},8,["href"]),s(Y,{class:J(["ms-4 mb-0",{"opacity-25":e(t).processing}]),disabled:e(t).processing},{icon:c(()=>[at]),default:c(()=>[f(" "+m(e(r)("save")),1)]),_:1},8,["disabled","class"])])],32)])])]),_:1},8,["title"]))}};export{Tt as default};
