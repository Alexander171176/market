import{u as B,Q as L,l as w,m as o,o as a,f as s,n as d,q as I,t as l,k as t,G as $,e as j,w as g,i as h,a7 as D,J as b,F as H,v as C,z as T,a4 as N,aL as P,p}from"./vendor-CMULZhQa.js";import{_ as R}from"./DefaultLayout-17nvjrKQ.js";import{a as E}from"./vendor-axios-jn5v1YEJ.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as O,_ as q}from"./CommentThread-ByawYBWr.js";import"./vendor-lodash-3g6-h99u.js";import"./ResponsiveNavLink-BBt1gw6L.js";import"./LogoutButton-BnL5i-Bj.js";import"./ScrollButtons-DjRj6zOj.js";import"./app-BmuzEqX8.js";const Z={itemprop:"interactionStatistic",itemscope:"",itemtype:"http://schema.org/InteractionCounter"},U=s("meta",{itemprop:"interactionType",content:"http://schema.org/LikeAction"},null,-1),G=["content"],J=["title"],Q=s("path",{d:"M3,9H1a1,1,0,0,0-1,1V22a1,1,0,0,0,1,1H4V10A1,1,0,0,0,3,9Z"},null,-1),Y=s("path",{d:"M21.882,8.133A2.986,2.986,0,0,0,21,8H15V5c0-3.824-2.589-4.942-3.958-5a1.017,1.017,0,0,0-.734.277A1,1,0,0,0,10,1V5.638l-4,4.8V23H18.23A2.985,2.985,0,0,0,21.1,20.882l2.769-9A3,3,0,0,0,21.882,8.133Z"},null,-1),K=[Q,Y],W={key:0,class:"ml-1 font-semibold text-xs dark:text-slate-100"},X={__name:"LikeButtonArticle",setup(x){const{t:r}=B(),{article:e}=L().props,n=w(e.likes_count),m=w(e.already_liked||!1),v=()=>{m.value||E.post(route("articles.like",e.id)).then(c=>{c.data.success?(n.value=c.data.likes,m.value=!0):alert(c.data.message||r("alertLikeAlready"))}).catch(c=>{var u;((u=c.response)==null?void 0:u.status)===401?alert(r("alertLikeAuthRequired")):(console.error("Ошибка лайка:",c),alert(r("alertLikeError")))})};return(c,u)=>(a(),o("div",Z,[U,s("meta",{itemprop:"userInteractionCount",content:n.value},null,8,G),s("div",{title:t(r)("like"),class:"w-fit flex flex-row items-center justify-center cursor-pointer"},[(a(),o("svg",{onClick:v,class:I(["w-4 h-4 fill-current transition-all duration-200 transform",m.value?"text-red-500 dark:text-red-300":"text-amber-500 dark:text-amber-400 hover:text-yellow-300 dark:hover:text-yellow-200 active:text-yellow-300 dark:active:text-yellow-100"]),viewBox:"0 0 24 24"},K,2)),n.value>0?(a(),o("span",W,l(n.value),1)):d("",!0)],8,J)]))}},tt={class:"relative w-full h-full"},et=["src","alt"],st={key:3,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},at=["onClick"],ot={__name:"ArticleImageMain",props:{images:{type:Array,required:!0},link:{type:String,default:""}},setup(x){const r=x,e=w(0),n=$(()=>r.images.length),m=$(()=>r.images[e.value]);return(v,c)=>(a(),o("div",tt,[x.link?(a(),j(t(b),{key:0,href:x.link,class:"block w-full h-full"},{default:g(()=>[h(D,{name:"fade",mode:"out-in"},{default:g(()=>[(a(),o("img",{key:m.value.id,src:m.value.webp_url||m.value.url,alt:m.value.alt,class:"w-full h-full object-cover shadow-md shadow-gray-600 dark:shadow-gray-900",loading:"lazy"},null,8,et))]),_:1})]),_:1},8,["href"])):d("",!0),n.value>1?(a(),o("button",{key:1,onClick:c[0]||(c[0]=u=>e.value=(e.value-1+n.value)%n.value),class:"absolute top-1/2 left-0 transform -translate-y-1/2 bg-gray-700 bg-opacity-75 text-white px-2 py-1 rounded-r focus:outline-none","aria-label":"Previous"}," ❮ ")):d("",!0),n.value>1?(a(),o("button",{key:2,onClick:c[1]||(c[1]=u=>e.value=(e.value+1)%n.value),class:"absolute top-1/2 right-0 transform -translate-y-1/2 bg-gray-700 bg-opacity-75 text-white px-2 py-1 rounded-l focus:outline-none","aria-label":"Next"}," ❯ ")):d("",!0),n.value>1?(a(),o("div",st,[(a(!0),o(H,null,C(n.value,(u,f)=>(a(),o("span",{key:f,onClick:k=>e.value=f,class:I(["cursor-pointer w-3 h-3 rounded-full border border-gray-500",e.value===f?"bg-red-500":"bg-slate-100"])},null,10,at))),128))])):d("",!0)]))}},lt=F(ot,[["__scopeId","data-v-e99420d1"]]),nt=["content"],it=["content"],rt=["content"],ct=["content"],dt=s("meta",{name:"viewport",content:"width=device-width, initial-scale=1"},null,-1),mt=["content"],ut=["content"],ht=s("meta",{property:"og:type",content:"article"},null,-1),_t=["content"],pt=["content"],gt=["content"],ft=s("meta",{name:"twitter:card",content:"summary_large_image"},null,-1),yt=["content"],xt=["content"],vt=["content"],kt=["content"],bt=["content"],wt=["content"],$t={class:"text-sm","aria-label":"Breadcrumb"},At={class:"list-reset flex items-center space-x-0"},Vt=s("li",null,[s("span",{class:"mx-1 text-slate-900 dark:text-slate-100"},"/")],-1),jt={class:"text-slate-900 dark:text-slate-100"},Ht=["datetime"],Ct=s("svg",{class:"w-3 h-3 fill-current shrink-0 mr-1",viewBox:"0 0 16 16"},[s("path",{d:"M15 2h-2V0h-2v2H9V0H7v2H5V0H3v2H1a1 1 0 00-1 1v12a1 1 0 001 1h14a1 1 0 001-1V3a1 1 0 00-1-1zm-1 12H2V6h12v8z"})],-1),It={class:"flex flex-row items-center justify-center my-1"},Mt={itemprop:"headline",class:"flex items-center justify-center my-2 text-center font-bolder text-xl text-slate-900 dark:text-slate-100"},Bt={class:"ml-2 w-6 h-5 flex items-center justify-center rounded-full text-[9px] font-semibold text-black dark:text-white bg-slate-100 dark:bg-slate-700",itemprop:"interactionStatistic",itemscope:"",itemtype:"http://schema.org/InteractionCounter"},Lt=s("meta",{itemprop:"interactionType",content:"http://schema.org/ViewAction"},null,-1),zt=["content","title"],St={key:0,class:"flex flex-col justify-center items-center",itemprop:"image",itemscope:"",itemtype:"https://schema.org/ImageObject"},Dt=s("meta",{itemprop:"width",content:"800"},null,-1),Tt=s("meta",{itemprop:"height",content:"600"},null,-1),Nt={key:1,class:"flex flex-col justify-center items-center",itemprop:"image",itemscope:"",itemtype:"https://schema.org/ImageObject"},Pt=["src","alt"],Rt=s("meta",{itemprop:"width",content:"800"},null,-1),Et=s("meta",{itemprop:"height",content:"600"},null,-1),Ft={key:2,class:"flex flex-col justify-center items-center",itemprop:"image",itemscope:"",itemtype:"https://schema.org/ImageObject"},Ot=s("img",{src:"/article_images/default-image.png",alt:"No image available",class:"w-full h-full object-cover opacity-40 shadow-md shadow-gray-600 dark:shadow-gray-900",loading:"lazy"},null,-1),qt=s("meta",{itemprop:"width",content:"800"},null,-1),Zt=s("meta",{itemprop:"height",content:"600"},null,-1),Ut=[Ot,qt,Zt],Gt={key:3,class:"mt-2 text-start text-xs text-gray-600 dark:text-gray-300",itemprop:"caption"},Jt={key:4,class:"flex items-center justify-center my-3"},Qt={itemprop:"description",class:"text-sm font-semibold text-black dark:text-white mr-2"},Yt=["innerHTML"],Kt={key:6,class:"flex justify-start items-center mb-3 font-semibold italic"},Wt={key:0},Xt={class:"flex justify-center items-center"},te={key:0,class:"font-semibold text-sm text-black dark:text-white",itemprop:"author"},ee={class:"mr-2 text-sky-600 dark:text-sky-300"},se={key:7,class:"mt-4"},ae={class:"mb-4 tracking-wide text-center font-semibold text-lg text-black dark:text-white"},oe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 gap-3"},le={class:"relative w-full"},ne={class:"w-full aspect-[4/3] overflow-hidden"},ie=["src","alt"],re={key:1,class:"w-full h-full flex items-center justify-center bg-gray-200 dark:bg-gray-400"},ce={class:"text-gray-500 dark:text-gray-700"},de={class:"absolute bottom-0 left-0 w-full px-2 pt-1 bg-slate-800 bg-opacity-75"},me={class:"text-xs font-semibold leading-5 tracking-wider text-slate-100 hover:text-amber-200"},ue={class:"mb-1 flex items-center justify-center text-xs font-semibold text-yellow-200 text-center"},he=s("svg",{class:"w-3 h-3 fill-current shrink-0 mr-1",viewBox:"0 0 16 16"},[s("path",{d:"M15 2h-2V0h-2v2H9V0H7v2H5V0H3v2H1a1 1 0 00-1 1v12a1 1 0 001 1h14a1 1 0 001-1V3a1 1 0 00-1-1zm-1 12H2V6h12v8z"})],-1),_e={key:8,class:"mt-6"},Ae={__name:"Show",setup(x){const{t:r}=B(),{article:e,recommendedArticles:n,recommendedVideos:m,siteSettings:v,user:c}=L().props,u=$(()=>{var _;return((_=e.tags)==null?void 0:_.filter(y=>y.activity))||[]}),f=w(!1);let k;const M=()=>{f.value=document.documentElement.classList.contains("dark")};T(()=>{M(),k=new MutationObserver(M),k.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}),N(()=>{k&&k.disconnect()});const z=$(()=>f.value?v.PublicDarkBackgroundColor:v.PublicLightBackgroundColor),A=_=>{const y=new Date(_),i=String(y.getDate()).padStart(2,"0"),V=String(y.getMonth()+1).padStart(2,"0"),S=y.getFullYear();return`${i}.${V}.${S}`};return(_,y)=>(a(),j(R,{title:t(e).title,"can-login":_.$page.props.canLogin,"can-register":_.$page.props.canRegister},{default:g(()=>[h(t(P),null,{default:g(()=>[s("title",null,l(t(e).title),1),s("meta",{name:"title",content:t(e).title||""},null,8,nt),s("meta",{name:"description",content:t(e).meta_desc||""},null,8,it),s("meta",{name:"keywords",content:t(e).meta_keywords||""},null,8,rt),s("meta",{name:"author",content:t(e).author||""},null,8,ct),dt,s("meta",{property:"og:title",content:t(e).title||""},null,8,mt),s("meta",{property:"og:description",content:t(e).meta_desc||""},null,8,ut),ht,s("meta",{property:"og:url",content:`/articles/${t(e).url}`},null,8,_t),s("meta",{property:"og:image",content:t(e).images&&t(e).images.length>0?t(e).images[0].url:""},null,8,pt),s("meta",{property:"og:locale",content:t(e).locale||"ru_RU"},null,8,gt),ft,s("meta",{name:"twitter:title",content:t(e).title||""},null,8,yt),s("meta",{name:"twitter:description",content:t(e).meta_desc||""},null,8,xt),s("meta",{name:"twitter:image",content:t(e).images&&t(e).images.length>0?t(e).images[0].url:""},null,8,vt),s("meta",{itemprop:"name",content:t(e).title||""},null,8,kt),s("meta",{itemprop:"description",content:t(e).meta_desc||""},null,8,bt),s("meta",{itemprop:"image",content:t(e).images&&t(e).images.length>0?t(e).images[0].url:""},null,8,wt)]),_:1}),s("article",{itemscope:"",itemtype:"https://schema.org/BlogPosting",class:I(["flex-1 p-4 selection:bg-red-400 selection:text-white",z.value])},[s("nav",$t,[s("ol",At,[s("li",null,[h(t(b),{href:"/",class:"hover:underline text-slate-900 dark:text-slate-100"},{default:g(()=>[p(l(t(r)("home")),1)]),_:1})]),Vt,s("li",jt,l(t(e).title),1)])]),s("header",null,[s("time",{itemprop:"datePublished",datetime:A(t(e).published_at),class:"mt-2 flex items-center justify-center text-xs font-semibold text-center text-slate-600 dark:text-slate-400 opacity-75"},[p(l(t(r)("publishedAt"))+":  ",1),Ct,p(" "+l(A(t(e).published_at)),1)],8,Ht),s("div",It,[s("h1",Mt,l(t(e).title),1),s("div",Bt,[Lt,s("meta",{itemprop:"userInteractionCount",content:t(e).views,title:t(r)("views")},null,8,zt),p(" "+l(t(e).views),1)])])]),t(e).images&&t(e).images.length>1?(a(),o("div",St,[h(lt,{images:t(e).images,link:`/articles/${t(e).url}`,class:"max-w-4xl"},null,8,["images","link"]),Dt,Tt])):t(e).images&&t(e).images.length===1?(a(),o("div",Nt,[s("img",{src:t(e).images[0].webp_url||t(e).images[0].url,alt:t(e).images[0].alt,class:"w-full h-full object-cover shadow-md shadow-gray-600 dark:shadow-gray-900",loading:"lazy"},null,8,Pt),Rt,Et])):(a(),o("div",Ft,Ut)),t(e).images[0].caption?(a(),o("div",Gt,l(t(e).images[0].caption),1)):d("",!0),t(e).short?(a(),o("div",Jt,[s("p",Qt,l(t(e).short),1)])):d("",!0),t(e).description?(a(),o("div",{key:5,class:"w-full mx-auto my-4 dark:text-slate-200",innerHTML:t(e).description,itemprop:"articleBody"},null,8,Yt)):d("",!0),u.value.length?(a(),o("div",Kt,[(a(!0),o(H,null,C(u.value,(i,V)=>(a(),o("span",{key:i.id},[h(t(b),{href:`/tags/${i.slug}`,itemprop:"keywords",class:"text-sm text-blue-500 dark:text-violet-300 hover:text-rose-400 hover:dark:text-rose-300"},{default:g(()=>[p(l(i.name),1)]),_:2},1032,["href"]),V<u.value.length-1?(a(),o("span",Wt,", ")):d("",!0)]))),128))])):d("",!0),s("div",Xt,[t(e).author?(a(),o("div",te,[p(l(t(r)("postAuthor"))+": ",1),s("span",ee,l(t(e).author),1)])):d("",!0),h(X,{"already-liked":t(e).already_liked},null,8,["already-liked"])]),t(n)&&t(n).length>0?(a(),o("div",se,[s("h2",ae,l(t(r)("relatedArticles"))+": ",1),s("div",oe,[(a(!0),o(H,null,C(t(n),i=>(a(),j(t(b),{href:`/articles/${i.url}`,key:i.id,class:"shadow-md shadow-gray-300 dark:shadow-gray-800"},{default:g(()=>[s("div",le,[s("div",ne,[i.images&&i.images.length>0?(a(),o("img",{key:0,src:i.images[0].webp_url||i.images[0].url,alt:i.images[0].alt,class:"w-full h-full object-cover",loading:"lazy"},null,8,ie)):(a(),o("div",re,[s("span",ce,l(t(r)("noCurrentImage")),1)]))]),s("div",de,[s("div",me,l(i.title),1),s("div",ue,[he,p(" "+l(i.published_at.substring(0,10)),1)])])])]),_:2},1032,["href"]))),128))])])):d("",!0),t(m)&&t(m).length>0?(a(),o("div",_e,[h(O,{videos:t(m),formatDate:A},null,8,["videos"])])):d("",!0),h(q,{"commentable-type":"App\\Models\\Admin\\Article\\Article","commentable-id":t(e).id,"auth-user":t(c)},null,8,["commentable-id","auth-user"])],2)]),_:1},8,["title","can-login","can-register"]))}};export{Ae as default};
