import{u as H,l as f,z as C,a4 as N,m as r,n as y,o as c,f as l,t as h,k as p,F as m,v as k,q as B,p as w,i as L,w as M,J as R,N as $,O as j}from"./vendor-gheHEdqg.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V=n=>($("data-v-ec817d31"),n=n(),j(),n),U={key:0,class:"mt-4"},D={class:"mb-4 tracking-wide text-center font-semibold text-lg text-black dark:text-white"},E={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 gap-3"},T={class:"relative w-full bg-black aspect-video overflow-hidden"},A={key:0,class:"relative w-full h-full"},F=["src","alt"],q={class:"absolute inset-0 flex items-center justify-center z-20"},J=["onClick"],O=V(()=>l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8 text-red-600",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M8 5v14l11-7z"})],-1)),P=[O],Z=["innerHTML"],G=["src"],K={key:2,class:"w-full h-full object-contain",controls:""},Q=["src"],W={class:"text-center text-sm font-semibold text-slate-800 dark:text-slate-100 pt-1"},X={class:"pb-2 flex items-center justify-center text-center text-xs text-slate-600 dark:text-slate-400"},Y=V(()=>l("svg",{class:"w-3 h-3 fill-current shrink-0 mr-1",viewBox:"0 0 16 16"},[l("path",{d:"M15 2h-2V0h-2v2H9V0H7v2H5V0H3v2H1a1 1 0 00-1 1v12a1 1 0 001 1h14a1 1 0 001-1V3a1 1 0 00-1-1zm-1 12H2V6h12v8z"})],-1)),ee={__name:"RecommendedVideos",props:{videos:Array},setup(n){const b=n,{t:g}=H(),i=f({}),x=f({}),u=f({}),z=(e,o)=>{v(e),o>1&&(u.value[e]=setInterval(()=>{i.value[e]=(i.value[e]+1)%o},4e3))},v=e=>{u.value[e]&&(clearInterval(u.value[e]),delete u.value[e])},S=e=>{x.value[e]=!0,v(e)},_=e=>{const o=e.source_type,t=e.external_video_id;try{if(o==="youtube"){let s=null;const a=new URL(t);if(s=a.searchParams.get("v"),!s&&a.hostname==="youtu.be"&&(s=a.pathname.slice(1)),!s&&a.pathname){const d=a.pathname.match(/(?:\/shorts\/|\/watch\/|\/)([a-zA-Z0-9_-]{11})/);s=d?d[1]:null}return s?`https://www.youtube.com/embed/${s}`:null}if(o==="vimeo"){const s=t.match(/vimeo\.com\/(?:video\/)?(\d+)/);return s?`https://player.vimeo.com/video/${s[1]}`:null}if(o==="local")return e.video_url||`/storage/${t}`;if(o==="code")return e.video_code||e.embed_code||null}catch(s){return console.error("âŒ Video URL error:",s),null}return null};return C(()=>{b.videos.forEach(e=>{var o;i.value[e.id]=0,((o=e.images)==null?void 0:o.length)>1&&z(e.id,e.images.length)})}),N(()=>{b.videos.forEach(e=>v(e.id))}),(e,o)=>n.videos&&n.videos.length>0?(c(),r("div",U,[l("h2",D,h(p(g)("relatedVideos")),1),l("div",E,[(c(!0),r(m,null,k(n.videos,t=>{var s;return c(),r("div",{key:t.id,class:"relative flex flex-col rounded overflow-hidden bg-slate-100 dark:bg-slate-700 border-2 border-slate-400 shadow-md shadow-gray-400 dark:shadow-gray-800"},[l("div",T,[(s=t.images)!=null&&s.length&&!x.value[t.id]?(c(),r("div",A,[(c(!0),r(m,null,k(t.images,(a,d)=>(c(),r("img",{key:a.id||d,src:a.url,alt:a.alt||t.title,class:B(["slide-fade w-full h-full object-cover",{"slide-fade-active":d===i.value[t.id]}]),loading:"lazy"},null,10,F))),128)),l("div",q,[l("button",{onClick:a=>S(t.id),class:"bg-white/30 hover:bg-white/40 backdrop-blur-md rounded-full p-2 border-8 border-white/30"},P,8,J)])])):(c(),r(m,{key:1},[t.source_type==="code"?(c(),r("div",{key:0,class:"w-full h-full",innerHTML:_(t)},null,8,Z)):["youtube","vimeo"].includes(t.source_type)?(c(),r("iframe",{key:1,class:"w-full h-full",src:_(t),style:{width:"100% !important","aspect-ratio":"16 / 9 !important",display:"block !important"},frameborder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowfullscreen:"",loading:"lazy"},null,8,G)):t.source_type==="local"?(c(),r("video",K,[l("source",{src:_(t),type:"video/mp4"},null,8,Q),w(" "+h(p(g)("videoNotSupported")),1)])):y("",!0)],64))]),l("div",W,[L(p(R),{href:`/videos/${t.url}`,class:"block text-sm font-semibold text-slate-800 dark:text-slate-100 hover:text-red-600 hover:dark:text-red-400 transition"},{default:M(()=>[w(h(t.title),1)]),_:2},1032,["href"]),l("div",X,[Y,w(" "+h(t.published_at?new Date(t.published_at).toLocaleDateString():""),1)])])])}),128))])])):y("",!0)}},le=I(ee,[["__scopeId","data-v-ec817d31"]]);export{le as R};
