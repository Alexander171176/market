import{u as B,Q as M,l as w,m as o,o as a,f as e,n as d,q as I,t as l,k as t,G as b,e as A,w as f,i as g,a7 as S,J as k,F as H,v as C,z as D,a4 as T,aU as N,p}from"./vendor-gheHEdqg.js";import{_ as P}from"./DefaultLayout-ephW1sRy.js";import{a as R}from"./vendor-axios-jn5v1YEJ.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as F}from"./RecommendedVideos-CLMMJBj0.js";import"./vendor-lodash-DlPAqqwV.js";import"./ResponsiveNavLink-rBqbn9MM.js";import"./LogoutButton-D4SDj_3T.js";import"./ScrollButtons-CW8XMUmz.js";import"./app-C-GmA_Q4.js";const O={itemprop:"interactionStatistic",itemscope:"",itemtype:"http://schema.org/InteractionCounter"},q=e("meta",{itemprop:"interactionType",content:"http://schema.org/LikeAction"},null,-1),U=["content"],Z=["title"],G=e("path",{d:"M3,9H1a1,1,0,0,0-1,1V22a1,1,0,0,0,1,1H4V10A1,1,0,0,0,3,9Z"},null,-1),J=e("path",{d:"M21.882,8.133A2.986,2.986,0,0,0,21,8H15V5c0-3.824-2.589-4.942-3.958-5a1.017,1.017,0,0,0-.734.277A1,1,0,0,0,10,1V5.638l-4,4.8V23H18.23A2.985,2.985,0,0,0,21.1,20.882l2.769-9A3,3,0,0,0,21.882,8.133Z"},null,-1),Q=[G,J],Y={key:0,class:"ml-1 font-semibold text-xs dark:text-slate-100"},K={__name:"LikeButtonArticle",setup(y){const{t:c}=B(),{article:s}=M().props,n=w(s.likes_count),m=w(s.already_liked||!1),v=()=>{m.value||R.post(route("articles.like",s.id)).then(i=>{i.data.success?(n.value=i.data.likes,m.value=!0):alert(i.data.message||c("alertLikeAlready"))}).catch(i=>{var u;((u=i.response)==null?void 0:u.status)===401?alert(c("alertLikeAuthRequired")):(console.error("Ошибка лайка:",i),alert(c("alertLikeError")))})};return(i,u)=>(a(),o("div",O,[q,e("meta",{itemprop:"userInteractionCount",content:n.value},null,8,U),e("div",{title:t(c)("like"),class:"w-fit flex flex-row items-center justify-center cursor-pointer"},[(a(),o("svg",{onClick:v,class:I(["w-4 h-4 fill-current transition-all duration-200 transform",m.value?"text-red-500 dark:text-red-300":"text-amber-500 dark:text-amber-400 hover:text-yellow-300 dark:hover:text-yellow-200 active:text-yellow-300 dark:active:text-yellow-100"]),viewBox:"0 0 24 24"},Q,2)),n.value>0?(a(),o("span",Y,l(n.value),1)):d("",!0)],8,Z)]))}},W={class:"relative w-full h-full"},X=["src","alt"],tt={key:3,class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},et=["onClick"],st={__name:"ArticleImageMain",props:{images:{type:Array,required:!0},link:{type:String,default:""}},setup(y){const c=y,s=w(0),n=b(()=>c.images.length),m=b(()=>c.images[s.value]);return(v,i)=>(a(),o("div",W,[y.link?(a(),A(t(k),{key:0,href:y.link,class:"block w-full h-full"},{default:f(()=>[g(S,{name:"fade",mode:"out-in"},{default:f(()=>[(a(),o("img",{key:m.value.id,src:m.value.webp_url||m.value.url,alt:m.value.alt,class:"w-full h-full object-cover shadow-md shadow-gray-600 dark:shadow-gray-900",loading:"lazy"},null,8,X))]),_:1})]),_:1},8,["href"])):d("",!0),n.value>1?(a(),o("button",{key:1,onClick:i[0]||(i[0]=u=>s.value=(s.value-1+n.value)%n.value),class:"absolute top-1/2 left-0 transform -translate-y-1/2 bg-gray-700 bg-opacity-75 text-white px-2 py-1 rounded-r focus:outline-none","aria-label":"Previous"}," ❮ ")):d("",!0),n.value>1?(a(),o("button",{key:2,onClick:i[1]||(i[1]=u=>s.value=(s.value+1)%n.value),class:"absolute top-1/2 right-0 transform -translate-y-1/2 bg-gray-700 bg-opacity-75 text-white px-2 py-1 rounded-l focus:outline-none","aria-label":"Next"}," ❯ ")):d("",!0),n.value>1?(a(),o("div",tt,[(a(!0),o(H,null,C(n.value,(u,h)=>(a(),o("span",{key:h,onClick:$=>s.value=h,class:I(["cursor-pointer w-3 h-3 rounded-full border border-gray-500",s.value===h?"bg-red-500":"bg-slate-100"])},null,10,et))),128))])):d("",!0)]))}},at=E(st,[["__scopeId","data-v-e99420d1"]]),ot=["content"],lt=["content"],nt=["content"],it=["content"],rt=e("meta",{name:"viewport",content:"width=device-width, initial-scale=1"},null,-1),ct=["content"],dt=["content"],mt=e("meta",{property:"og:type",content:"article"},null,-1),ut=["content"],ht=["content"],_t=["content"],pt=e("meta",{name:"twitter:card",content:"summary_large_image"},null,-1),gt=["content"],ft=["content"],xt=["content"],yt=["content"],vt=["content"],kt=["content"],wt={class:"text-sm","aria-label":"Breadcrumb"},bt={class:"list-reset flex items-center space-x-0"},$t=e("li",null,[e("span",{class:"mx-1 text-slate-900 dark:text-slate-100"},"/")],-1),Vt={class:"text-slate-900 dark:text-slate-100"},jt=["datetime"],At=e("svg",{class:"w-3 h-3 fill-current shrink-0 mr-1",viewBox:"0 0 16 16"},[e("path",{d:"M15 2h-2V0h-2v2H9V0H7v2H5V0H3v2H1a1 1 0 00-1 1v12a1 1 0 001 1h14a1 1 0 001-1V3a1 1 0 00-1-1zm-1 12H2V6h12v8z"})],-1),Ht={class:"flex flex-row items-center justify-center my-1"},Ct={itemprop:"headline",class:"flex items-center justify-center my-2 text-center font-bolder text-xl text-slate-900 dark:text-slate-100"},It={class:"ml-2 w-6 h-5 flex items-center justify-center rounded-full text-[9px] font-semibold text-black dark:text-white bg-slate-100 dark:bg-slate-700",itemprop:"interactionStatistic",itemscope:"",itemtype:"http://schema.org/InteractionCounter"},Bt=e("meta",{itemprop:"interactionType",content:"http://schema.org/ViewAction"},null,-1),Mt=["content","title"],Lt={key:0,class:"flex flex-col justify-center items-center",itemprop:"image",itemscope:"",itemtype:"https://schema.org/ImageObject"},zt=e("meta",{itemprop:"width",content:"800"},null,-1),St=e("meta",{itemprop:"height",content:"600"},null,-1),Dt={key:1,class:"flex flex-col justify-center items-center",itemprop:"image",itemscope:"",itemtype:"https://schema.org/ImageObject"},Tt=["src","alt"],Nt=e("meta",{itemprop:"width",content:"800"},null,-1),Pt=e("meta",{itemprop:"height",content:"600"},null,-1),Rt={key:2,class:"flex flex-col justify-center items-center",itemprop:"image",itemscope:"",itemtype:"https://schema.org/ImageObject"},Et=e("img",{src:"/article_images/default-image.png",alt:"No image available",class:"w-full h-full object-cover opacity-40 shadow-md shadow-gray-600 dark:shadow-gray-900",loading:"lazy"},null,-1),Ft=e("meta",{itemprop:"width",content:"800"},null,-1),Ot=e("meta",{itemprop:"height",content:"600"},null,-1),qt=[Et,Ft,Ot],Ut={key:3,class:"mt-2 text-start text-xs text-gray-600 dark:text-gray-300",itemprop:"caption"},Zt={key:4,class:"flex items-center justify-center my-3"},Gt={itemprop:"description",class:"text-sm font-semibold text-black dark:text-white mr-2"},Jt=["innerHTML"],Qt={key:6,class:"flex justify-start items-center mb-3 font-semibold italic"},Yt={key:0},Kt={class:"flex justify-center items-center"},Wt={key:0,class:"font-semibold text-sm text-black dark:text-white",itemprop:"author"},Xt={class:"mr-2 text-sky-600 dark:text-sky-300"},te={key:7,class:"mt-4"},ee={class:"mb-4 tracking-wide text-center font-semibold text-lg text-black dark:text-white"},se={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 gap-3"},ae={class:"relative w-full"},oe={class:"w-full aspect-[4/3] overflow-hidden"},le=["src","alt"],ne={key:1,class:"w-full h-full flex items-center justify-center bg-gray-200 dark:bg-gray-400"},ie={class:"text-gray-500 dark:text-gray-700"},re={class:"absolute bottom-0 left-0 w-full px-2 pt-1 bg-slate-800 bg-opacity-75"},ce={class:"text-xs font-semibold leading-5 tracking-wider text-slate-100 hover:text-amber-200"},de={class:"mb-1 flex items-center justify-center text-xs font-semibold text-yellow-200 text-center"},me=e("svg",{class:"w-3 h-3 fill-current shrink-0 mr-1",viewBox:"0 0 16 16"},[e("path",{d:"M15 2h-2V0h-2v2H9V0H7v2H5V0H3v2H1a1 1 0 00-1 1v12a1 1 0 001 1h14a1 1 0 001-1V3a1 1 0 00-1-1zm-1 12H2V6h12v8z"})],-1),ue={key:8,class:"mt-6"},be={__name:"Show",setup(y){const{t:c}=B(),{article:s,recommendedArticles:n,recommendedVideos:m,siteSettings:v}=M().props,i=b(()=>{var _;return((_=s.tags)==null?void 0:_.filter(x=>x.activity))||[]}),u=w(!1);let h;const $=()=>{u.value=document.documentElement.classList.contains("dark")};D(()=>{$(),h=new MutationObserver($),h.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}),T(()=>{h&&h.disconnect()});const L=b(()=>u.value?v.PublicDarkBackgroundColor:v.PublicLightBackgroundColor),V=_=>{const x=new Date(_),r=String(x.getDate()).padStart(2,"0"),j=String(x.getMonth()+1).padStart(2,"0"),z=x.getFullYear();return`${r}.${j}.${z}`};return(_,x)=>(a(),A(P,{title:t(s).title,"can-login":_.$page.props.canLogin,"can-register":_.$page.props.canRegister},{default:f(()=>[g(t(N),null,{default:f(()=>[e("title",null,l(t(s).title),1),e("meta",{name:"title",content:t(s).title||""},null,8,ot),e("meta",{name:"description",content:t(s).meta_desc||""},null,8,lt),e("meta",{name:"keywords",content:t(s).meta_keywords||""},null,8,nt),e("meta",{name:"author",content:t(s).author||""},null,8,it),rt,e("meta",{property:"og:title",content:t(s).title||""},null,8,ct),e("meta",{property:"og:description",content:t(s).meta_desc||""},null,8,dt),mt,e("meta",{property:"og:url",content:`/articles/${t(s).url}`},null,8,ut),e("meta",{property:"og:image",content:t(s).images&&t(s).images.length>0?t(s).images[0].url:""},null,8,ht),e("meta",{property:"og:locale",content:t(s).locale||"ru_RU"},null,8,_t),pt,e("meta",{name:"twitter:title",content:t(s).title||""},null,8,gt),e("meta",{name:"twitter:description",content:t(s).meta_desc||""},null,8,ft),e("meta",{name:"twitter:image",content:t(s).images&&t(s).images.length>0?t(s).images[0].url:""},null,8,xt),e("meta",{itemprop:"name",content:t(s).title||""},null,8,yt),e("meta",{itemprop:"description",content:t(s).meta_desc||""},null,8,vt),e("meta",{itemprop:"image",content:t(s).images&&t(s).images.length>0?t(s).images[0].url:""},null,8,kt)]),_:1}),e("article",{itemscope:"",itemtype:"https://schema.org/BlogPosting",class:I(["flex-1 p-4 selection:bg-red-400 selection:text-white",L.value])},[e("nav",wt,[e("ol",bt,[e("li",null,[g(t(k),{href:"/",class:"hover:underline text-slate-900 dark:text-slate-100"},{default:f(()=>[p(l(t(c)("home")),1)]),_:1})]),$t,e("li",Vt,l(t(s).title),1)])]),e("header",null,[e("time",{itemprop:"datePublished",datetime:V(t(s).published_at),class:"mt-2 flex items-center justify-center text-xs font-semibold text-center text-slate-600 dark:text-slate-400 opacity-75"},[p(l(t(c)("publishedAt"))+":  ",1),At,p(" "+l(V(t(s).published_at)),1)],8,jt),e("div",Ht,[e("h1",Ct,l(t(s).title),1),e("div",It,[Bt,e("meta",{itemprop:"userInteractionCount",content:t(s).views,title:t(c)("views")},null,8,Mt),p(" "+l(t(s).views),1)])])]),t(s).images&&t(s).images.length>1?(a(),o("div",Lt,[g(at,{images:t(s).images,link:`/articles/${t(s).url}`,class:"max-w-4xl"},null,8,["images","link"]),zt,St])):t(s).images&&t(s).images.length===1?(a(),o("div",Dt,[e("img",{src:t(s).images[0].webp_url||t(s).images[0].url,alt:t(s).images[0].alt,class:"w-full h-full object-cover shadow-md shadow-gray-600 dark:shadow-gray-900",loading:"lazy"},null,8,Tt),Nt,Pt])):(a(),o("div",Rt,qt)),t(s).images[0].caption?(a(),o("div",Ut,l(t(s).images[0].caption),1)):d("",!0),t(s).short?(a(),o("div",Zt,[e("p",Gt,l(t(s).short),1)])):d("",!0),t(s).description?(a(),o("div",{key:5,class:"w-full mx-auto my-4 dark:text-slate-200",innerHTML:t(s).description,itemprop:"articleBody"},null,8,Jt)):d("",!0),i.value.length?(a(),o("div",Qt,[(a(!0),o(H,null,C(i.value,(r,j)=>(a(),o("span",{key:r.id},[g(t(k),{href:`/tags/${r.slug}`,itemprop:"keywords",class:"text-sm text-blue-500 dark:text-violet-300 hover:text-rose-400 hover:dark:text-rose-300"},{default:f(()=>[p(l(r.name),1)]),_:2},1032,["href"]),j<i.value.length-1?(a(),o("span",Yt,", ")):d("",!0)]))),128))])):d("",!0),e("div",Kt,[t(s).author?(a(),o("div",Wt,[p(l(t(c)("postAuthor"))+": ",1),e("span",Xt,l(t(s).author),1)])):d("",!0),g(K,{"already-liked":t(s).already_liked},null,8,["already-liked"])]),t(n)&&t(n).length>0?(a(),o("div",te,[e("h2",ee,l(t(c)("relatedArticles"))+": ",1),e("div",se,[(a(!0),o(H,null,C(t(n),r=>(a(),A(t(k),{href:`/articles/${r.url}`,key:r.id,class:"shadow-md shadow-gray-300 dark:shadow-gray-800"},{default:f(()=>[e("div",ae,[e("div",oe,[r.images&&r.images.length>0?(a(),o("img",{key:0,src:r.images[0].webp_url||r.images[0].url,alt:r.images[0].alt,class:"w-full h-full object-cover",loading:"lazy"},null,8,le)):(a(),o("div",ne,[e("span",ie,l(t(c)("noCurrentImage")),1)]))]),e("div",re,[e("div",ce,l(r.title),1),e("div",de,[me,p(" "+l(r.published_at.substring(0,10)),1)])])])]),_:2},1032,["href"]))),128))])])):d("",!0),t(m)&&t(m).length>0?(a(),o("div",ue,[g(F,{videos:t(m),formatDate:V},null,8,["videos"])])):d("",!0)],2)]),_:1},8,["title","can-login","can-register"]))}};export{be as default};
