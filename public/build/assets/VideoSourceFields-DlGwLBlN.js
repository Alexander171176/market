import{u as _,G as g,m as u,n as m,o as i,i as s,k as n,t as I,f as d}from"./vendor-CMULZhQa.js";import{_ as v,a as p}from"./InputText-BO1leBMl.js";const k={key:0,class:"w-full mb-3"},w={key:0,class:"mt-2 text-sm text-green-700 dark:text-green-300"},U={key:1,class:"relative pb-[56.25%] h-0 overflow-hidden bg-black mt-4"},C=["src"],$={key:1,class:"w-full mb-3"},S={class:"mb-3 flex flex-col"},F={class:"mb-3 flex flex-col"},B={key:0,class:"mt-2 flex justify-center"},L=["src"],N={key:2,class:"w-full mb-3"},j={class:"mb-3 flex flex-col"},P=["value","placeholder"],Y={__name:"VideoSourceFields",props:{modelValue:{type:String,required:!0},videoUrl:{type:String,default:""},externalVideoId:{type:String,default:""},videoFile:{type:Object,default:null},embedCode:{type:String,default:""}},emits:["update:modelValue","update:videoUrl","update:externalVideoId","update:videoFile","update:embedCode"],setup(o,{emit:x}){const{t:r}=_(),a=o,h=x,b=t=>{try{const e=new URL(t),l=e.searchParams.get("v");if(l)return l;if(e.hostname==="youtu.be")return e.pathname.slice(1);if(e.pathname.startsWith("/shorts/")){const f=e.pathname.split("/");return f[2]||f[1]}}catch(e){console.error("❌ extractYouTubeId error:",e)}return null},y=t=>{const e=/vimeo\.com\/(?:video\/)?(\d+)/,l=t.match(e);return l?l[1]:null},c=g(()=>{if(!a.externalVideoId)return"";if(a.modelValue==="youtube"){const t=b(a.externalVideoId);return t?`https://www.youtube.com/embed/${t}`:""}if(a.modelValue==="vimeo"){const t=y(a.externalVideoId);return t?`https://player.vimeo.com/video/${t}`:""}return""}),V=t=>{const e=t.target.files[0];h("update:videoFile",e)};return(t,e)=>o.modelValue==="youtube"||o.modelValue==="vimeo"?(i(),u("div",k,[s(v,{for:"external_video_url",value:n(r)("externalVideoId")},null,8,["value"]),s(p,{id:"external_video_url",type:"text",modelValue:o.externalVideoId,onInput:e[0]||(e[0]=l=>t.$emit("update:externalVideoId",l.target.value)),autocomplete:"external_video_url",placeholder:n(r)("videoLinkInsert")},null,8,["modelValue","placeholder"]),c.value?(i(),u("div",w,I(c.value),1)):m("",!0),c.value?(i(),u("div",U,[d("iframe",{src:c.value,class:"absolute top-0 left-0 w-full h-full border-0",allow:"autoplay; fullscreen; picture-in-picture"},null,8,C)])):m("",!0)])):o.modelValue==="local"?(i(),u("div",$,[d("div",S,[s(v,{for:"video_file",value:n(r)("uploadVideo")},null,8,["value"]),d("input",{id:"video_file",type:"file",onChange:V,class:"bg-slate-100 dark:bg-slate-300 text-gray-900 dark:text-gray-700 px-3 py-0.5"},null,32)]),d("div",F,[s(v,{for:"video_url",value:n(r)("videoUrl")},null,8,["value"]),s(p,{id:"video_url",type:"text",modelValue:o.videoUrl,onInput:e[1]||(e[1]=l=>t.$emit("update:videoUrl",l.target.value)),autocomplete:"video_url",placeholder:"Введите URL локального видео (если требуется)"},null,8,["modelValue"])]),a.videoUrl?(i(),u("div",B,[d("video",{controls:"",src:a.videoUrl,class:"max-w-full rounded-sm shadow"},null,8,L)])):m("",!0)])):o.modelValue==="code"?(i(),u("div",N,[d("div",j,[s(v,{for:"video_code",value:n(r)("videoCode")},null,8,["value"]),d("textarea",{value:o.embedCode,onInput:e[2]||(e[2]=l=>t.$emit("update:embedCode",l.target.value)),class:"h-80 form-textarea …",placeholder:n(r)("videoCodeInsert")},null,40,P)])])):m("",!0)}};export{Y as _};
