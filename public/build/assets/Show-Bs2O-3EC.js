import{u as U,Q as A,G as P,l as V,z as j,a_ as N,m as u,o as l,f as e,A as T,I as Y,n as z,ay as F,k as t,q as H,F as B,v as D,e as p,w as d,J as h,i as _,t as n,p as S,E as C,a4 as q,aU as E}from"./vendor-gheHEdqg.js";import{a as I,_ as O}from"./DefaultLayout-Cc1JHsuz.js";import"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-DlPAqqwV.js";import"./ResponsiveNavLink-rBqbn9MM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LogoutButton-D4SDj_3T.js";import"./ScrollButtons-Cu_QW-CT.js";import"./app-CAaXoGpY.js";const Q={class:"flex flex-row items-center gap-4 mb-4"},R={class:"relative w-full max-w-lg mx-auto"},W=["placeholder"],G=["title"],J=e("svg",{class:"w-4 h-4",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill-current text-slate-500 dark:text-slate-300",d:"M7 14c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7zM7 2C4.243 2 2 4.243 2 7s2.243 5 5 5 5-2.243 5-5-2.243-5-5-5z"}),e("path",{class:"fill-current text-slate-400 dark:text-slate-200",d:"M15.707 14.293L13.314 11.9a8.019 8.019 0 01-1.414 1.414l2.393 2.393a.997.997 0 001.414 0 .999.999 0 000-1.414z"})],-1),Z=[J],K={class:"flex justify-end items-center space-x-2"},X=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),ee=[X],te=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 12h16M4 18h16"})],-1),se=[te],ae={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},re={class:"overflow-hidden h-auto mb-2 rounded-md shadow-lg shadow-gray-400 dark:shadow-gray-900"},oe=["src"],le={class:"text-gray-500 dark:text-gray-700"},ne={class:"flex flex-col"},ie={class:"text-md font-semibold text-black dark:text-white my-1"},de={class:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2"},ce={class:"flex items-center justify-center text-xs font-semibold text-center text-slate-600 dark:text-slate-400 opacity-75"},ue=e("svg",{class:"w-3 h-3 fill-current shrink-0 mr-1",viewBox:"0 0 16 16"},[e("path",{d:"M15 2h-2V0h-2v2H9V0H7v2H5V0H3v2H1a1 1 0 00-1 1v12a1 1 0 001 1h14a1 1 0 001-1V3a1 1 0 00-1-1zm-1 12H2V6h12v8z"})],-1),he={key:1,class:"space-y-4"},ge={class:"w-full sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-56 h-auto shrink-0 overflow-hidden rounded-md"},me=["src"],be={class:"text-slate-900 dark:text-slate-100"},xe={class:"flex flex-col flex-grow"},pe={class:"text-md font-semibold text-black dark:text-white my-1"},_e={class:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2"},fe={class:"flex items-center justify-center text-xs font-semibold text-center text-slate-600 dark:text-slate-400 opacity-75"},ve=e("svg",{class:"w-3 h-3 fill-current shrink-0 mr-1",viewBox:"0 0 16 16"},[e("path",{d:"M15 2h-2V0h-2v2H9V0H7v2H5V0H3v2H1a1 1 0 00-1 1v12a1 1 0 001 1h14a1 1 0 001-1V3a1 1 0 00-1-1zm-1 12H2V6h12v8z"})],-1),ke={class:"flex items-center justify-center mt-6 space-x-2 text-sm font-medium"},ye=["disabled"],we=["value","max"],$e={class:"text-gray-700 dark:text-gray-200"},Me=["disabled"],Se={__name:"TagArticles",props:{articles:{type:[Array,Object],required:!0},pagination:{type:Object,default:()=>({})},baseUrl:{type:String,required:!0},search:{type:String,default:""}},setup(c){const{t:m}=U(),{appUrl:a}=A().props,y=r=>{if(!r)return"";const o=a.endsWith("/")?a.slice(0,-1):a,s=r.startsWith("/")?r.slice(1):r;return`${o}/storage/${s}`},i=c,w=P(()=>Array.isArray(i.articles)?i.articles:i.articles&&Array.isArray(i.articles.data)?i.articles.data:[]),g=V(i.search||""),$=()=>{const r=g.value.trim();C.get(i.baseUrl,{search:r},{preserveScroll:!0,preserveState:!1})},f=()=>{g.value="",C.get(i.baseUrl,{},{preserveScroll:!0,preserveState:!1})},k=r=>{const o=new Date(r),s=String(o.getDate()).padStart(2,"0"),x=String(o.getMonth()+1).padStart(2,"0"),L=o.getFullYear();return`${s}.${x}.${L}`},b=V("horizontal");j(()=>{localStorage.getItem("articleViewMode")==="grid"&&(b.value="grid")});const v=r=>{b.value=r,localStorage.setItem("articleViewMode",r)},M=r=>{r>=1&&r<=i.pagination.lastPage&&C.get(i.baseUrl,{page_articles:r},{preserveScroll:!0,preserveState:!1,only:["articles","pagination"]})};return j(()=>{const r=localStorage.getItem("scrollY");r!==null&&(window.scrollTo(0,parseInt(r)),localStorage.removeItem("scrollY"))}),N(()=>{localStorage.setItem("scrollY",window.scrollY)}),(r,o)=>(l(),u("div",null,[e("div",Q,[e("form",{onSubmit:T($,["prevent"]),class:"flex-grow"},[e("div",R,[Y(e("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>g.value=s),type:"text",placeholder:t(m)("searchByName"),class:"w-full pl-3 pr-16 py-1 bg-slate-100 dark:bg-slate-600 font-semibold text-sm text-slate-600 dark:text-slate-100 border border-slate-500 dark:border-slate-400 rounded-sm focus:outline-none focus:ring-1 focus:border-blue-300"},null,8,W),[[F,g.value]]),g.value?(l(),u("button",{key:0,type:"button",onClick:f,class:"absolute right-8 top-1/2 transform -translate-y-1/2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-800 border border-gray-900 dark:border-gray-100 py-0 px-1.5 text-slate-700 dark:text-white hover:text-red-500",title:"Очистить"}," ✕ ")):z("",!0),e("button",{type:"submit",class:"absolute right-1 top-1/2 transform -translate-y-1/2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-800 border border-gray-900 dark:border-gray-100 p-1",title:t(m)("searchByName")},Z,8,G)])],32),e("div",K,[e("button",{onClick:o[1]||(o[1]=s=>v("grid")),class:H(["p-1 border transition-colors duration-200 rounded",b.value==="grid"?"border-slate-400 dark:border-slate-200 text-red-400 dark:text-red-200":"border-slate-300 dark:border-slate-400 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 hover:border-slate-500 dark:hover:border-slate-500"])},ee,2),e("button",{onClick:o[2]||(o[2]=s=>v("horizontal")),class:H(["p-1 border transition-colors duration-200 rounded",b.value==="horizontal"?"border-slate-400 dark:border-slate-200 text-red-400 dark:text-red-200":"border-slate-300 dark:border-slate-400 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 hover:border-slate-500 dark:hover:border-slate-500"])},se,2)])]),b.value==="grid"?(l(),u("div",ae,[(l(!0),u(B,null,D(w.value,s=>{var x;return l(),u("div",{key:s.id,class:"p-2 rounded-sm shadow-sm overflow-hidden hover:bg-slate-50 dark:hover:bg-slate-800 hover:shadow-md hover:shadow-gray-400 dark:hover:shadow-gray-700"},[e("div",re,[s.img?(l(),p(t(h),{key:0,href:`/articles/${s.url}`},{default:d(()=>[e("img",{src:y(s.img),alt:"Article image",class:"w-full h-auto object-cover"},null,8,oe)]),_:2},1032,["href"])):(x=s.images)!=null&&x.length?(l(),p(t(h),{key:1,href:`/articles/${s.url}`},{default:d(()=>[_(I,{images:s.images,link:`/articles/${s.url}`},null,8,["images","link"])]),_:2},1032,["href"])):(l(),p(t(h),{key:2,href:`/articles/${s.url}`,class:"flex items-center justify-center bg-gray-200 dark:bg-gray-400 h-32"},{default:d(()=>[e("span",le,n(t(m)("noCurrentImage")),1)]),_:2},1032,["href"]))]),e("div",ne,[e("h3",ie,[_(t(h),{href:`/articles/${s.url}`,class:"hover:text-blue-600 dark:hover:text-blue-400"},{default:d(()=>[S(n(s.title),1)]),_:2},1032,["href"])]),e("p",de,n(s.short),1),e("div",ce,[ue,e("span",null,n(k(s.published_at)),1)])])])}),128))])):(l(),u("div",he,[(l(!0),u(B,null,D(w.value,s=>{var x;return l(),u("div",{key:s.id,class:"col-span-full flex flex-col sm:flex-row items-start space-x-3 p-2 overflow-hidden hover:bg-slate-50 dark:hover:bg-slate-800 hover:shadow-md hover:shadow-gray-400 dark:hover:shadow-gray-700"},[e("div",ge,[s.img?(l(),p(t(h),{key:0,href:`/articles/${s.url}`},{default:d(()=>[e("img",{src:y(s.img),alt:"Article image",class:"w-full h-auto object-cover"},null,8,me)]),_:2},1032,["href"])):(x=s.images)!=null&&x.length?(l(),p(t(h),{key:1,href:`/articles/${s.url}`},{default:d(()=>[_(I,{images:s.images,link:`/articles/${s.url}`},null,8,["images","link"])]),_:2},1032,["href"])):(l(),p(t(h),{key:2,href:`/articles/${s.url}`,class:"flex items-center justify-center bg-gray-200 dark:bg-gray-400 h-32"},{default:d(()=>[e("span",be,n(t(m)("noCurrentImage")),1)]),_:2},1032,["href"]))]),e("div",xe,[e("h3",pe,[_(t(h),{href:`/articles/${s.url}`,class:"hover:text-blue-600 dark:hover:text-blue-400"},{default:d(()=>[S(n(s.title),1)]),_:2},1032,["href"])]),e("p",_e,n(s.short),1),e("div",fe,[ve,e("span",null,n(k(s.published_at)),1)])])])}),128))])),e("div",ke,[e("button",{onClick:o[3]||(o[3]=s=>M(c.pagination.currentPage-1)),disabled:c.pagination.currentPage===1,class:"px-3 py-1 rounded bg-slate-100 dark:bg-slate-600 text-gray-900 dark:text-gray-100 border border-gray-400 dark:border-gray-200 disabled:opacity-50"}," « ",8,ye),e("input",{type:"number",value:c.pagination.currentPage,onChange:o[4]||(o[4]=s=>M(Number(s.target.value))),min:1,max:c.pagination.lastPage,class:"w-16 text-center px-3 py-1.5 border border-gray-400 dark:border-gray-200 rounded bg-slate-100 dark:bg-slate-600 text-gray-900 dark:text-white text-xs"},null,40,we),e("span",$e,"/ "+n(c.pagination.lastPage),1),e("button",{onClick:o[5]||(o[5]=s=>M(c.pagination.currentPage+1)),disabled:c.pagination.currentPage===c.pagination.lastPage,class:"px-3 py-1 rounded bg-slate-100 dark:bg-slate-600 text-gray-900 dark:text-gray-100 border border-gray-400 dark:border-gray-200 disabled:opacity-50"}," » ",8,Me)])]))}},Ce=["content"],Ve=["content"],je=["content"],ze=["content"],He=["content"],Be=e("meta",{property:"og:type",content:"website"},null,-1),De=["content"],Ie=["content"],Ue=e("meta",{name:"twitter:card",content:"summary_large_image"},null,-1),Ae=["content"],Pe=["content"],Le=["content"],Ne=["content"],Te=["content"],Ye=["content"],Fe={class:"text-sm mb-4","aria-label":"Breadcrumb"},qe={class:"list-reset flex items-center space-x-0"},Ee=e("li",null,[e("span",{class:"mx-1 text-slate-900 dark:text-slate-100"},"/")],-1),Oe={class:"text-slate-900 dark:text-slate-100"},Qe={class:"flex items-center justify-center my-4 text-center font-bolder text-xl text-slate-900 dark:text-slate-100"},Re=["innerHTML"],We=["title"],Ge={key:0,class:"flex items-center justify-center mb-4 tracking-wide text-sm font-semibold text-black dark:text-white"},ot={__name:"Show",setup(c){const{t:m}=U(),{tag:a,articles:y,pagination:i,locale:w,siteSettings:g}=A().props,$=V(!1);let f;const k=()=>{$.value=document.documentElement.classList.contains("dark")};j(()=>{k(),f=new MutationObserver(k),f.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}),q(()=>{f&&f.disconnect()});const b=P(()=>$.value?g.PublicDarkBackgroundColor:g.PublicLightBackgroundColor);return(v,M)=>(l(),p(O,{title:t(a).name,"can-login":v.$page.props.canLogin,"can-register":v.$page.props.canRegister},{default:d(()=>{var r;return[_(t(E),null,{default:d(()=>[e("title",null,n(t(a).name),1),e("meta",{name:"title",content:t(a).name||""},null,8,Ce),e("meta",{name:"keywords",content:t(a).meta_keywords||""},null,8,Ve),e("meta",{name:"description",content:t(a).meta_desc||""},null,8,je),e("meta",{property:"og:title",content:t(a).name||""},null,8,ze),e("meta",{property:"og:description",content:t(a).meta_desc||""},null,8,He),Be,e("meta",{property:"og:url",content:`/tags/${t(a).url}`},null,8,De),e("meta",{property:"og:locale",content:t(a).locale||"ru_RU"},null,8,Ie),Ue,e("meta",{name:"twitter:title",content:t(a).name||""},null,8,Ae),e("meta",{name:"twitter:description",content:t(a).meta_desc||""},null,8,Pe),e("meta",{name:"DC.title",content:t(a).name||""},null,8,Le),e("meta",{name:"DC.description",content:t(a).meta_desc||""},null,8,Ne),e("meta",{name:"DC.identifier",content:`/tags/${t(a).url}`},null,8,Te),e("meta",{name:"DC.language",content:t(a).locale||"ru"},null,8,Ye)]),_:1}),e("div",{class:H(["flex-1 p-4",[b.value]])},[e("nav",Fe,[e("ol",qe,[e("li",null,[_(t(h),{href:"/",class:"hover:underline text-slate-900 dark:text-slate-100"},{default:d(()=>[S(n(t(m)("home")),1)]),_:1})]),Ee,e("li",Oe,n(t(a).name),1)])]),e("h1",Qe,[S(n(t(a).name)+" ",1),t(a).icon?(l(),u("span",{key:0,class:"flex justify-center ml-2",innerHTML:t(a).icon},null,8,Re)):z("",!0),e("div",{class:"ml-2 w-6 h-5 flex items-center justify-center rounded-full text-[9px] font-semibold text-black dark:text-white bg-slate-100 dark:bg-slate-700",title:t(m)("views")},n(t(a).views),9,We)]),t(a).short?(l(),u("p",Ge,n(t(a).short),1)):z("",!0),_(Se,{articles:t(y),pagination:t(i),"base-url":`/${t(w)}/tags/${t(a).slug}`,search:((r=v.$page.props.filters)==null?void 0:r.search)??""},null,8,["articles","pagination","base-url","search"])],2)]}),_:1},8,["title","can-login","can-register"]))}};export{ot as default};
