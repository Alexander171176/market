import{y as C,u as T,T as z,e as L,o as b,w as u,f as o,i as s,p as f,t as d,k as e,A as w,I as S,ar as D,B as V,m as A,n as N,q as E}from"./vendor-CMULZhQa.js";import{_ as I,t as F}from"./MetatagsButton-DFHL53iq.js";import{A as H}from"./AdminLayout-BMfLiLo0.js";import{T as O}from"./TitlePage-DOI2IMRH.js";import{_ as k}from"./DefaultButton-CB_WTPCQ.js";import{_ as P}from"./PrimaryButton-BQKaB6gG.js";import{_ as p,a as x,b as g}from"./InputNumber-BKnpntqH.js";import{_ as R,a as K}from"./TinyEditor-zoGYMinn.js";import{_ as U}from"./MetaDescTextarea-BqXrk_pu.js";import{_ as n,a as _}from"./InputText-BO1leBMl.js";import{_ as m}from"./InputError-B8v-5UJo.js";import{_ as Z}from"./MultiImageUpload-B1nZ7a18.js";/* empty css                                                                     */import"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-3g6-h99u.js";import"./sidebarIcons-D5nT6JI0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-BBt1gw6L.js";import"./ScrollButtons-DjRj6zOj.js";import"./app-BmuzEqX8.js";import"./auth-image-XbvYdkSi.js";const G={class:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-12xl mx-auto"},J={class:"p-4 bg-slate-50 dark:bg-slate-700 border border-blue-400 dark:border-blue-200 shadow-lg shadow-gray-500 dark:shadow-slate-400 bg-opacity-95 dark:bg-opacity-95"},Q={class:"sm:flex sm:justify-between sm:items-center mb-2"},W=o("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[o("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),X=o("div",{class:"grid grid-flow-col sm:auto-cols-max justify-start sm:justify-end gap-2"},null,-1),Y={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},ee={class:"flex flex-row items-center gap-2"},te={class:"flex flex-row items-center gap-2 w-auto"},le={class:"flex flex-row items-center gap-2"},se={class:"h-8 flex items-center"},oe={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},ae={class:"flex flex-row items-center gap-2"},re={class:"flex flex-row items-center gap-2"},ie={class:"flex flex-row items-center gap-2"},de={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},ne={class:"flex flex-row items-center gap-2"},me={class:"flex flex-row items-center gap-2"},ue={class:"flex flex-row items-center gap-2"},ce={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},fe={class:"flex flex-row items-center gap-2"},pe={class:"h-8 flex items-center"},xe={class:"flex flex-row items-center gap-2 w-auto"},_e={class:"flex flex-row items-center gap-2"},ge={class:"h-8 flex items-center"},ve={class:"mb-3 flex flex-row items-center gap-2 max-w-80 mx-auto"},we={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},he={class:"flex flex-row items-center gap-2"},ye={class:"h-8 flex items-center"},be={class:"flex flex-row items-center gap-2"},Ve={class:"flex items-center"},ke=o("option",{value:"USD"},"USD",-1),Ue=o("option",{value:"EUR"},"EUR",-1),je=o("option",{value:"KZT"},"KZT",-1),Me=o("option",{value:"RUB"},"RUB",-1),$e=[ke,Ue,je,Me],qe={class:"flex flex-row items-center gap-2"},Be={class:"h-8 flex items-center"},Ce={class:"mb-3 flex flex-col items-start"},Te={class:"mb-3 flex flex-col items-start"},ze=o("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),Le={class:"mb-3 flex flex-col items-start"},Se=o("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),De={class:"mb-3 flex flex-col items-start"},Ae={class:"flex justify-between w-full"},Ne={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Ee={class:"mb-3 flex flex-col items-start"},Ie={class:"mb-3 flex flex-col items-start"},Fe={class:"mb-3 flex flex-col items-start"},He={class:"flex justify-between w-full"},Oe={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Pe={class:"mb-3 flex flex-col items-start"},Re={class:"flex justify-between w-full"},Ke={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Ze={class:"mb-3 flex flex-col items-start"},Ge={class:"flex justify-between w-full"},Je={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Qe={class:"flex justify-end mt-4"},We=o("svg",{class:"w-4 h-4 fill-current text-slate-600 shrink-0 mr-2",viewBox:"0 0 16 16"},[o("path",{d:"M13 7h2v6a1 1 0 01-1 1H4v2l-4-3 4-3v2h9V7zM3 9H1V3a1 1 0 011-1h10V0l4 3-4 3V4H3v5z"})],-1),Xe={class:"mb-3 flex flex-col items-start"},Ye={class:"flex justify-between w-full"},et={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},tt={class:"relative w-full"},lt=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.54-10.46a.75.75 0 10-1.06-1.06L10 8.94 7.53 6.47a.75.75 0 10-1.06 1.06L8.94 10l-2.47 2.47a.75.75 0 101.06 1.06L10 11.06l2.47 2.47a.75.75 0 101.06-1.06L11.06 10l2.47-2.47z","clip-rule":"evenodd"})],-1),st=[lt],ot={class:"flex items-center justify-center mt-4"},at=o("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[o("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),rt=o("svg",{class:"w-4 h-4 fill-current text-slate-100",viewBox:"0 0 16 16"},[o("path",{d:"M14.3 2.3L5 11.6 1.7 8.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4l4 4c.2.2.4.3.7.3.3 0 .5-.1.7-.3l10-10c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0z"})],-1),$t={__name:"Create",props:{categories:Array,images:Array,related_products:{type:Array,default:()=>[]}},setup(h){const y=C(),{t:r}=T(),t=z({sort:0,locale:"",sku:"",title:"",url:"",short:"",description:"",quantity:0,unit:"",weight:0,availability:"",price:0,old_price:0,currency:"USD",barcode:"",meta_title:"",meta_keywords:"",meta_desc:"",admin:"",activity:!1,left:!1,main:!1,right:!1,is_new:!1,is_hit:!1,is_sale:!1,categories:[],related_products:[],images:[],category_ids:[]}),j=()=>{t.title&&(t.url=F(t.title.toLowerCase()))},v=(i,l,a=!1)=>{if(i.length<=l)return i;const c=i.substr(0,i.lastIndexOf(" ",l));return a?`${c}...`:c},M=()=>{if(t.title&&!t.meta_title&&(t.meta_title=v(t.title,160)),!t.meta_keywords&&t.short){let i=t.short.replace(/(<([^>]+)>)/gi,"");i=i.replace(/[.,!?;:()\[\]{}"'«»]/g,"");const a=i.split(/\s+/).filter(c=>c&&c.length>=3).map(c=>c.toLowerCase()).filter((c,q,B)=>B.indexOf(c)===q).join(", ");t.meta_keywords=v(a,255)}if(t.short&&!t.meta_desc){const i=t.short.replace(/(<([^>]+)>)/gi,"");t.meta_desc=v(i,200,!0)}},$=()=>{t.transform(i=>({...i,activity:i.activity?1:0,left:i.left?1:0,main:i.main?1:0,right:i.right?1:0,images:t.images.map(l=>{if(l.file)return{file:l.file,order:l.order,alt:l.alt,caption:l.caption};if(l.id)return{id:Number(l.id),order:l.order,alt:l.alt,caption:l.caption}}).filter(Boolean)})),t.post(route("admin.products.store"),{preserveScroll:!0,onSuccess:()=>{y.success("Товар успешно создан!")},onError:i=>{console.error("Не удалось отправить форму:",i);const l=i[Object.keys(i)[0]];y.error(l||"Пожалуйста, проверьте правильность заполнения полей.")}})};return(i,l)=>(b(),L(H,{title:e(r)("createProduct")},{header:u(()=>[s(O,null,{default:u(()=>[f(d(e(r)("createProduct")),1)]),_:1})]),default:u(()=>[o("div",G,[o("div",J,[o("div",Q,[s(k,{href:i.route("admin.products.index")},{icon:u(()=>[W]),default:u(()=>[f(" "+d(e(r)("back")),1)]),_:1},8,["href"]),X]),o("form",{onSubmit:w($,["prevent"]),enctype:"multipart/form-data",class:"p-3 w-full"},[o("div",Y,[o("div",ee,[s(p,{modelValue:e(t).activity,"onUpdate:modelValue":l[0]||(l[0]=a=>e(t).activity=a)},null,8,["modelValue"]),s(x,{for:"activity",text:e(r)("activity"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),o("div",te,[s(R,{modelValue:e(t).locale,"onUpdate:modelValue":l[1]||(l[1]=a=>e(t).locale=a),errorMessage:e(t).errors.locale},null,8,["modelValue","errorMessage"]),s(m,{class:"mt-2 lg:mt-0",message:e(t).errors.locale},null,8,["message"])]),o("div",le,[o("div",se,[s(n,{for:"sort",value:e(r)("sort"),class:"text-sm"},null,8,["value"])]),s(g,{id:"sort",type:"number",modelValue:e(t).sort,"onUpdate:modelValue":l[2]||(l[2]=a=>e(t).sort=a),autocomplete:"sort",class:"w-full lg:w-28"},null,8,["modelValue"]),s(m,{class:"mt-2 lg:mt-0",message:e(t).errors.sort},null,8,["message"])])]),o("div",oe,[o("div",ae,[s(p,{modelValue:e(t).left,"onUpdate:modelValue":l[3]||(l[3]=a=>e(t).left=a)},null,8,["modelValue"]),s(x,{for:"left",text:e(r)("left"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),o("div",re,[s(p,{modelValue:e(t).main,"onUpdate:modelValue":l[4]||(l[4]=a=>e(t).main=a)},null,8,["modelValue"]),s(x,{for:"main",text:e(r)("main"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),o("div",ie,[s(p,{modelValue:e(t).right,"onUpdate:modelValue":l[5]||(l[5]=a=>e(t).right=a)},null,8,["modelValue"]),s(x,{for:"right",text:e(r)("right"),class:"text-sm h-8 flex items-center"},null,8,["text"])])]),o("div",de,[o("div",ne,[s(p,{modelValue:e(t).is_new,"onUpdate:modelValue":l[6]||(l[6]=a=>e(t).is_new=a)},null,8,["modelValue"]),s(x,{for:"left",text:e(r)("isNew"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),o("div",me,[s(p,{modelValue:e(t).is_hit,"onUpdate:modelValue":l[7]||(l[7]=a=>e(t).is_hit=a)},null,8,["modelValue"]),s(x,{for:"main",text:e(r)("isHit"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),o("div",ue,[s(p,{modelValue:e(t).is_sale,"onUpdate:modelValue":l[8]||(l[8]=a=>e(t).is_sale=a)},null,8,["modelValue"]),s(x,{for:"right",text:e(r)("isSale"),class:"text-sm h-8 flex items-center"},null,8,["text"])])]),o("div",ce,[o("div",fe,[o("div",pe,[s(n,{for:"quantity",value:e(r)("quantity"),class:"text-sm"},null,8,["value"])]),s(g,{id:"quantity",type:"number",modelValue:e(t).quantity,"onUpdate:modelValue":l[9]||(l[9]=a=>e(t).quantity=a),autocomplete:"quantity",class:"w-full lg:w-28"},null,8,["modelValue"]),s(m,{class:"mt-2 lg:mt-0",message:e(t).errors.quantity},null,8,["message"])]),o("div",xe,[s(n,{for:"title"},{default:u(()=>[f(d(e(r)("unit")),1)]),_:1}),s(_,{id:"unit",type:"text",modelValue:e(t).unit,"onUpdate:modelValue":l[10]||(l[10]=a=>e(t).unit=a),required:"",autocomplete:"unit"},null,8,["modelValue"]),s(m,{class:"mt-2",message:e(t).errors.unit},null,8,["message"])]),o("div",_e,[o("div",ge,[s(n,{for:"weight",value:e(r)("weight"),class:"text-sm"},null,8,["value"])]),s(g,{id:"weight",type:"number",modelValue:e(t).weight,"onUpdate:modelValue":l[11]||(l[11]=a=>e(t).weight=a),autocomplete:"weight",class:"w-full lg:w-28"},null,8,["modelValue"]),s(m,{class:"mt-2 lg:mt-0",message:e(t).errors.weight},null,8,["message"])])]),o("div",ve,[s(n,{for:"availability"},{default:u(()=>[f(d(e(r)("availability")),1)]),_:1}),s(_,{id:"availability",type:"text",modelValue:e(t).availability,"onUpdate:modelValue":l[12]||(l[12]=a=>e(t).availability=a),required:"",autocomplete:"availability"},null,8,["modelValue"]),s(m,{class:"mt-2",message:e(t).errors.availability},null,8,["message"])]),o("div",we,[o("div",he,[o("div",ye,[s(n,{for:"old_price",value:e(r)("priceOld"),class:"text-sm"},null,8,["value"])]),s(g,{id:"old_price",modelValue:e(t).old_price,"onUpdate:modelValue":l[13]||(l[13]=a=>e(t).old_price=a),modelModifiers:{number:!0},step:"0.01",min:"0",class:"w-full lg:w-28"},null,8,["modelValue"]),s(m,{class:"mt-2 lg:mt-0",message:e(t).errors.old_price},null,8,["message"])]),o("div",be,[o("div",Ve,[s(n,{for:"currency",value:e(r)("currency"),class:"text-sm"},null,8,["value"])]),S(o("select",{id:"currency","onUpdate:modelValue":l[14]||(l[14]=a=>e(t).currency=a),class:"w-full lg:w-28 block py-0.5 rounded-sm shadow-sm font-semibold text-sm border-slate-500 focus:border-indigo-500 focus:ring-indigo-300 dark:bg-cyan-800 dark:text-slate-100"},$e,512),[[D,e(t).currency]]),s(m,{class:"mt-2 lg:mt-0",message:e(t).errors.currency},null,8,["message"])]),o("div",qe,[o("div",Be,[s(n,{for:"price",value:e(r)("price"),class:"text-sm"},null,8,["value"])]),s(g,{id:"price",modelValue:e(t).price,"onUpdate:modelValue":l[15]||(l[15]=a=>e(t).price=a),modelModifiers:{number:!0},step:"0.01",min:"0",class:"w-full lg:w-28"},null,8,["modelValue"]),s(m,{class:"mt-2 lg:mt-0",message:e(t).errors.price},null,8,["message"])])]),o("div",Ce,[s(n,{for:"categories",value:e(r)("categories"),class:"mb-1"},null,8,["value"]),s(e(V),{modelValue:e(t).categories,"onUpdate:modelValue":l[16]||(l[16]=a=>e(t).categories=a),options:h.categories,multiple:!0,"close-on-select":!0,placeholder:e(r)("select"),label:"title","track-by":"title"},null,8,["modelValue","options","placeholder"])]),o("div",Te,[s(n,{for:"title"},{default:u(()=>[ze,f(" "+d(e(r)("name")),1)]),_:1}),s(_,{id:"title",type:"text",modelValue:e(t).title,"onUpdate:modelValue":l[17]||(l[17]=a=>e(t).title=a),required:"",autocomplete:"title"},null,8,["modelValue"]),s(m,{class:"mt-2",message:e(t).errors.title},null,8,["message"])]),o("div",Le,[s(n,{for:"url"},{default:u(()=>[Se,f(" "+d(e(r)("url")),1)]),_:1}),s(_,{id:"url",type:"text",modelValue:e(t).url,"onUpdate:modelValue":l[18]||(l[18]=a=>e(t).url=a),required:"",autocomplete:"url",onFocus:j},null,8,["modelValue"]),s(m,{class:"mt-2",message:e(t).errors.url},null,8,["message"])]),o("div",De,[o("div",Ae,[s(n,{for:"short",value:e(r)("shortDescription")},null,8,["value"]),o("div",Ne,d(e(t).short.length)+" / 255 "+d(e(r)("characters")),1)]),s(U,{modelValue:e(t).short,"onUpdate:modelValue":l[19]||(l[19]=a=>e(t).short=a),class:"w-full"},null,8,["modelValue"]),s(m,{class:"mt-2",message:e(t).errors.short},null,8,["message"])]),o("div",Ee,[s(n,{for:"description",value:e(r)("description")},null,8,["value"]),s(K,{modelValue:e(t).description,"onUpdate:modelValue":l[20]||(l[20]=a=>e(t).description=a),height:500},null,8,["modelValue"]),s(m,{class:"mt-2",message:e(t).errors.description},null,8,["message"])]),o("div",Ie,[s(n,{for:"related_products",value:e(r)("relatedProducts"),class:"mb-1"},null,8,["value"]),s(e(V),{modelValue:e(t).related_products,"onUpdate:modelValue":l[21]||(l[21]=a=>e(t).related_products=a),options:h.related_products,multiple:!0,"close-on-select":!0,placeholder:e(r)("select"),label:"title","track-by":"title"},null,8,["modelValue","options","placeholder"]),s(m,{class:"mt-2",message:e(t).errors.related_products},null,8,["message"])]),o("div",Fe,[o("div",He,[s(n,{for:"meta_title",value:e(r)("metaTitle")},null,8,["value"]),o("div",Oe,d(e(t).meta_title.length)+" / 160 "+d(e(r)("characters")),1)]),s(_,{id:"meta_title",type:"text",modelValue:e(t).meta_title,"onUpdate:modelValue":l[22]||(l[22]=a=>e(t).meta_title=a),maxlength:"160",autocomplete:"url"},null,8,["modelValue"]),s(m,{class:"mt-2",message:e(t).errors.meta_title},null,8,["message"])]),o("div",Pe,[o("div",Re,[s(n,{for:"meta_keywords",value:e(r)("metaKeywords")},null,8,["value"]),o("div",Ke,d(e(t).meta_keywords.length)+" / 255 "+d(e(r)("characters")),1)]),s(_,{id:"meta_keywords",type:"text",modelValue:e(t).meta_keywords,"onUpdate:modelValue":l[23]||(l[23]=a=>e(t).meta_keywords=a),maxlength:"255",autocomplete:"url"},null,8,["modelValue"]),s(m,{class:"mt-2",message:e(t).errors.meta_keywords},null,8,["message"])]),o("div",Ze,[o("div",Ge,[s(n,{for:"meta_desc",value:e(r)("metaDescription")},null,8,["value"]),o("div",Je,d(e(t).meta_desc.length)+" / 200 "+d(e(r)("characters")),1)]),s(U,{modelValue:e(t).meta_desc,"onUpdate:modelValue":l[24]||(l[24]=a=>e(t).meta_desc=a),maxlength:"200",class:"w-full"},null,8,["modelValue"]),s(m,{class:"mt-2",message:e(t).errors.meta_desc},null,8,["message"])]),o("div",Qe,[s(I,{onClick:w(M,["prevent"])},{icon:u(()=>[We]),default:u(()=>[f(" "+d(e(r)("generateMetaTags")),1)]),_:1})]),o("div",Xe,[o("div",Ye,[s(n,{for:"barcode",value:e(r)("barcode"),class:"text-sm w-28"},null,8,["value"]),o("div",et,d(e(t).barcode.length)+" / 255 "+d(e(r)("characters")),1)]),o("div",tt,[s(_,{id:"barcode",type:"text",modelValue:e(t).barcode,"onUpdate:modelValue":l[25]||(l[25]=a=>e(t).barcode=a),onInput:l[26]||(l[26]=a=>e(t).barcode=e(t).barcode.replace(/\D/g,"")),maxlength:"255",autocomplete:"off",class:"w-full pr-10"},null,8,["modelValue"]),e(t).barcode?(b(),A("button",{key:0,onClick:l[27]||(l[27]=w(a=>e(t).barcode="",["prevent"])),type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-200",title:"Очистить"},st)):N("",!0)]),s(m,{class:"mt-2",message:e(t).errors.barcode},null,8,["message"])]),s(Z,{"onUpdate:images":l[28]||(l[28]=a=>e(t).images=a)}),o("div",ot,[s(k,{href:i.route("admin.products.index"),class:"mb-3"},{icon:u(()=>[at]),default:u(()=>[f(" "+d(e(r)("back")),1)]),_:1},8,["href"]),s(P,{class:E(["ms-4 mb-0",{"opacity-25":e(t).processing}]),disabled:e(t).processing},{icon:u(()=>[rt]),default:u(()=>[f(" "+d(e(r)("save")),1)]),_:1},8,["class","disabled"])])],32)])])]),_:1},8,["title"]))}};export{$t as default};
