import{u as P,l as $,C as j,m as g,o as _,f as e,i as v,t as i,k as o,w as S,F,v as H,D as ee,y as te,E as w,G as B,e as L,n as D,p as R}from"./vendor-BEBDZ0sp.js";import{A as se}from"./AdminLayout-TrfrbzAn.js";import{T as le}from"./TitlePage-DJKfB1_5.js";import{_ as oe}from"./DefaultButton-CwH6gKRp.js";import{_ as ae,a as ie,b as re}from"./CountTable-XEwDSe2k.js";import{_ as ne,a as ce,b as de}from"./SearchInput-TuOF_y9b.js";import{_ as ue}from"./IconEdit-DzaKHCZk.js";import{_ as pe}from"./ActivityToggle-Dd_0Qj5d.js";import{_ as he,a as _e}from"./RightToggle-xK72_m8s.js";import{_ as ve}from"./MainToggle-Dk0JnAiR.js";import{a as z}from"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-CeR_jfIo.js";import"./ScrollButtons-C6QmoBlh.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-fXlkiuVz.js";import"./LocaleSelectOption-Bf35oBpC.js";import"./app-srWkjDCr.js";import"./auth-image-XbvYdkSi.js";const fe={class:"bg-white dark:bg-slate-700 shadow-lg rounded-sm border border-slate-200 dark:border-slate-600 relative"},me={class:"overflow-x-auto"},ge={key:0,class:"table-auto w-full text-slate-700 dark:text-slate-100"},xe={class:"text-sm uppercase bg-slate-200 dark:bg-cyan-900 border border-solid border-gray-300 dark:border-gray-700"},ye=e("th",{class:"px-2 py-3 w-px"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 fill-current text-slate-800 dark:text-slate-200",height:"24",width:"24",viewBox:"0 0 24 24"},[e("path",{d:"M12.707,2.293a1,1,0,0,0-1.414,0l-5,5A1,1,0,0,0,7.707,8.707L12,4.414l4.293,4.293a1,1,0,0,0,1.414-1.414Z"}),e("path",{d:"M16.293,15.293,12,19.586,7.707,15.293a1,1,0,0,0-1.414,1.414l5,5a1,1,0,0,0,1.414,0l5-5a1,1,0,0,0-1.414-1.414Z"})])],-1),we={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap w-px"},be={class:"font-medium text-center"},$e={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap"},ke=["title"],Se=e("svg",{class:"w-6 h-6 fill-current shrink-0",viewBox:"0 0 512 512"},[e("path",{d:"M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM323.8 202.5c-4.5-6.6-11.9-10.5-19.8-10.5s-15.4 3.9-19.8 10.5l-87 127.6L170.7 297c-4.6-5.7-11.5-9-18.7-9s-14.2 3.3-18.7 9l-64 80c-5.8 7.2-6.9 17.1-2.9 25.4s12.4 13.6 21.6 13.6l96 0 32 0 208 0c8.9 0 17.1-4.9 21.2-12.8s3.6-17.4-1.4-24.7l-120-176zM112 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"})],-1),Ae=[Se],Te={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap"},Me=["title"],Ve=e("svg",{class:"w-8 h-8 fill-current shrink-0",viewBox:"0 0 640 512"},[e("path",{d:"M0 128C0 92.7 28.7 64 64 64l192 0 48 0 16 0 256 0c35.3 0 64 28.7 64 64l0 256c0 35.3-28.7 64-64 64l-256 0-16 0-48 0L64 448c-35.3 0-64-28.7-64-64L0 128zm320 0l0 256 256 0 0-256-256 0zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1 .1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1 73.6 0 8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2L179 276l-38 0 19-42.8zM448 164c11 0 20 9 20 20l0 4 44 0 16 0c11 0 20 9 20 20s-9 20-20 20l-2 0-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4c.9 .6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9l-18.9-11.3c-4.5-2.7-8.8-5.5-13.1-8.5c-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8l-12.2-12.2c-7.8-7.8-7.8-20.5 0-28.3s20.5-7.8 28.3 0l14.6 14.6 .5 .5c12.4-13.1 22.5-28.3 29.8-45L448 228l-72 0c-11 0-20-9-20-20s9-20 20-20l52 0 0-4c0-11 9-20 20-20z"})],-1),Ce=[Ve],Le={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap"},De={class:"font-medium text-left"},ze={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap"},Pe={class:"font-medium text-left"},Ee={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap"},Be={class:"font-medium text-left"},Re={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap"},je={class:"font-medium text-left"},Ie={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap"},Ue={class:"font-medium text-left"},Ne={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap"},Oe=["title"],Fe=e("svg",{class:"w-4 h-4 fill-current shrink-0",viewBox:"0 0 16 16"},[e("path",{d:"M8 2C3.246 2 .251 7.29.127 7.515a.998.998 0 0 0 .002.975c.07.125 1.044 1.801 2.695 3.274C4.738 13.582 6.283 14 8 14c4.706 0 7.743-5.284 7.872-5.507a1 1 0 0 0 0-.98A13.292 13.292 0 0 0 8 2zm0 10a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0-6a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"})],-1),He=[Fe],Je={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap"},Ke=["title"],Ze=e("svg",{class:"h-8 w-8 fill-current",viewBox:"0 0 32 32"},[e("path",{d:"M22.682 11.318A4.485 4.485 0 0019.5 10a4.377 4.377 0 00-3.5 1.707A4.383 4.383 0 0012.5 10a4.5 4.5 0 00-3.182 7.682L16 24l6.682-6.318a4.5 4.5 0 000-6.364zm-1.4 4.933L16 21.247l-5.285-5A2.5 2.5 0 0112.5 12c1.437 0 2.312.681 3.5 2.625C17.187 12.681 18.062 12 19.5 12a2.5 2.5 0 011.785 4.251h-.003z"})],-1),Ge=[Ze],Qe={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap"},qe={class:"font-medium text-center"},We={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap"},Xe={class:"font-medium text-center"},Ye={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap"},et={class:"text-center"},tt={class:"text-sm font-semibold border-b-2 hover:bg-slate-100 dark:hover:bg-cyan-800"},st=e("td",{class:"px-2 py-1 text-center cursor-move handle"},[e("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M7 4h2v2H7V4zm4 0h2v2h-2V4zM7 8h2v2H7V8zm4 0h2v2h-2V8zM7 12h2v2H7v-2zm4 0h2v2h-2v-2z"})])],-1),lt={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},ot={class:"text-center text-blue-600 dark:text-blue-200"},at={class:"first:pl-5 last:pr-5 py-1"},it={class:"flex justify-center"},rt=["src","alt","title"],nt=["alt"],ct={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},dt={class:"text-center uppercase text-orange-500 dark:text-orange-200"},ut={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},pt={class:"text-left text-sky-600 dark:text-sky-200"},ht={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},_t=["title"],vt={class:"px-2 first:pl-7 last:pr-7 py-1 whitespace-nowrap"},ft={class:"text-left"},mt=["href"],gt={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},xt={class:"text-left"},yt=["title"],wt={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},bt={class:"text-left"},$t=["title"],kt={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},St={class:"text-center"},At={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},Tt={class:"text-center"},Mt={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},Vt={class:"flex justify-center space-x-2"},Ct={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},Lt={class:"flex justify-center space-x-2"},Dt={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},zt={class:"text-center"},Pt=["checked","onChange"],Et={key:1,class:"p-5 text-center text-slate-700 dark:text-slate-100"},Bt={__name:"VideoTable",props:{videos:Array,selectedVideos:Array},emits:["toggle-left","toggle-main","toggle-right","toggle-activity","edit","delete","update-sort-order","toggle-select","toggle-all"],setup(f,{emit:x}){const{t:s}=P(),b=f,p=x,n=d=>{if(!d)return"";const m=new Date(d);return isNaN(m)?"":m.toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"})},y=$([]);j(()=>b.videos,d=>{y.value=JSON.parse(JSON.stringify(d||[]))},{immediate:!0,deep:!0});const k=()=>{const d=y.value.map(m=>m.id);p("update-sort-order",d)},A=d=>{const m=d.target.checked,r=y.value.map(h=>h.id);p("toggle-all",{ids:r,checked:m})},T=d=>d.images&&d.images.length?[...d.images].sort((m,r)=>m.order-r.order)[0]:null;return(d,m)=>(_(),g("div",fe,[e("div",me,[f.videos.length>0?(_(),g("table",ge,[e("thead",xe,[e("tr",null,[ye,e("th",we,[e("div",be,i(o(s)("id")),1)]),e("th",$e,[e("div",{class:"flex justify-center",title:o(s)("image")},Ae,8,ke)]),e("th",Te,[e("div",{class:"flex justify-center",title:o(s)("localization")},Ce,8,Me)]),e("th",Le,[e("div",De,i(o(s)("type")),1)]),e("th",ze,[e("div",Pe,i(o(s)("title")),1)]),e("th",Ee,[e("div",Be,i(o(s)("url")),1)]),e("th",Re,[e("div",je,i(o(s)("sections")),1)]),e("th",Ie,[e("div",Ue,i(o(s)("articles")),1)]),e("th",Ne,[e("div",{class:"flex justify-center",title:o(s)("views")},He,8,Oe)]),e("th",Je,[e("div",{class:"flex justify-center",title:o(s)("likes")},Ge,8,Ke)]),e("th",Qe,[e("div",qe,i(o(s)("show")),1)]),e("th",We,[e("div",Xe,i(o(s)("actions")),1)]),e("th",Ye,[e("div",et,[e("input",{type:"checkbox",onChange:A},null,32)])])])]),v(o(ee),{tag:"tbody",modelValue:y.value,"onUpdate:modelValue":m[0]||(m[0]=r=>y.value=r),onEnd:k,itemKey:"id",handle:".handle"},{item:S(({element:r})=>[e("tr",tt,[st,e("td",lt,[e("div",ot,i(r.id),1)]),e("td",at,[e("div",it,[r.images&&r.images.length?(_(),g("img",{key:0,src:T(r).webp_url||T(r).url,alt:T(r).alt||o(s)("defaultImageAlt"),title:T(r).caption||o(s)("postImage"),class:"h-6 w-8 object-cover rounded-sm"},null,8,rt)):(_(),g("img",{key:1,src:"/storage/video_images/default-image.png",alt:o(s)("defaultImageTitle"),class:"h-6 w-8 object-cover rounded-sm"},null,8,nt))])]),e("td",ct,[e("div",dt,i(r.locale),1)]),e("td",ut,[e("div",pt,i(r.source_type),1)]),e("td",ht,[e("div",{class:"text-left text-teal-600 dark:text-green-200",title:n(r.published_at)},i(r.title),9,_t)]),e("td",vt,[e("div",ft,[e("a",{href:`/videos/${encodeURIComponent(r.url)}`,class:"text-violet-600 dark:text-violet-200 hover:underline hover:text-violet-800 dark:hover:text-violet-50",target:"_blank",rel:"noopener noreferrer"},i(r.url),9,mt)])]),e("td",gt,[e("div",xt,[(_(!0),g(F,null,H(r.sections,h=>(_(),g("span",{key:h.id},[e("span",{title:h.title,class:"py-0.5 px-1.5 mr-0.5 badge bg-blue-500 dark:bg-blue-200 rounded-sm text-xs text-slate-100 dark:text-slate-900"},i(h.id),9,yt)]))),128))])]),e("td",wt,[e("div",bt,[(_(!0),g(F,null,H(r.articles,h=>(_(),g("span",{key:h.id},[e("span",{title:h.title,class:"py-0.5 px-1.5 mr-0.5 badge bg-blue-500 dark:bg-blue-200 rounded-sm text-xs text-slate-100 dark:text-slate-900"},i(h.id),9,$t)]))),128))])]),e("td",kt,[e("div",St,i(r.views),1)]),e("td",At,[e("div",Tt,i(r.likes),1)]),e("td",Mt,[e("div",Vt,[v(he,{isActive:r.left,onToggleLeft:h=>d.$emit("toggle-left",r),title:r.left?o(s)("enabled"):o(s)("disabled")},null,8,["isActive","onToggleLeft","title"]),v(ve,{isActive:r.main,onToggleMain:h=>d.$emit("toggle-main",r),title:r.main?o(s)("enabled"):o(s)("disabled")},null,8,["isActive","onToggleMain","title"]),v(_e,{isActive:r.right,onToggleRight:h=>d.$emit("toggle-right",r),title:r.right?o(s)("enabled"):o(s)("disabled")},null,8,["isActive","onToggleRight","title"])])]),e("td",Ct,[e("div",Lt,[v(pe,{isActive:r.activity,onToggleActivity:h=>d.$emit("toggle-activity",r),title:r.activity?o(s)("enabled"):o(s)("disabled")},null,8,["isActive","onToggleActivity","title"]),v(ue,{href:d.route("admin.videos.edit",r.id)},null,8,["href"]),v(ae,{onDelete:h=>d.$emit("delete",r.id)},null,8,["onDelete"])])]),e("td",Dt,[e("div",zt,[e("input",{type:"checkbox",checked:f.selectedVideos.includes(r.id),onChange:h=>d.$emit("toggle-select",r.id)},null,40,Pt)])])])]),_:1},8,["modelValue"])])):(_(),g("div",Et,i(o(s)("noData")),1))])]))}},Rt={class:"flex justify-center items-center h-fit sm:mr-4 mt-2 mb-2"},jt={for:"sortParam",class:"hidden lg:block sm:mr-2 tracking-wider text-sm font-semibold text-slate-600 dark:text-slate-100"},It=["value"],Ut={value:"idDesc"},Nt={value:"idAsc"},Ot={value:"published_at"},Ft={value:"sort"},Ht={value:"title"},Jt={value:"locale"},Kt={value:"views"},Zt={value:"likes"},Gt={value:"activity"},Qt={value:"inactive"},qt={value:"left"},Wt={value:"noLeft"},Xt={value:"main"},Yt={value:"noMain"},es={value:"right"},ts={value:"noRight"},ss={__name:"SortSelect",props:{sortParam:String},emits:["update:sortParam"],setup(f,{emit:x}){const{t:s}=P(),b=x,p=n=>{b("update:sortParam",n.target.value)};return(n,y)=>(_(),g("div",Rt,[e("label",jt,i(o(s)("sort")),1),e("select",{id:"sortParam",value:f.sortParam,onChange:p,class:"w-50 px-3 py-0.5 form-select bg-white dark:bg-gray-200 text-gray-600 dark:text-gray-900 border border-slate-400 dark:border-slate-600 rounded-sm shadow-sm"},[e("option",Ut,i(o(s)("idDesc")),1),e("option",Nt,i(o(s)("idAsc")),1),e("option",Ot,i(o(s)("publishedAt")),1),e("option",Ft,i(o(s)("sortNumber")),1),e("option",Ht,i(o(s)("title")),1),e("option",Jt,i(o(s)("localization")),1),e("option",Kt,i(o(s)("views")),1),e("option",Zt,i(o(s)("likes")),1),e("option",Gt,i(o(s)("active")),1),e("option",Qt,i(o(s)("inactive")),1),e("option",qt,i(o(s)("inLeft")),1),e("option",Wt,i(o(s)("notLeft")),1),e("option",Xt,i(o(s)("inMain")),1),e("option",Yt,i(o(s)("notMain")),1),e("option",es,i(o(s)("inRight")),1),e("option",ts,i(o(s)("notRight")),1)],40,It)]))}},ls={class:"flex flex-col sm:flex-row items-center"},os={class:"block mb-2 sm:mb-0 sm:mr-2 font-semibold text-sm text-slate-700 dark:text-slate-500"},as={value:"",disabled:"",selected:""},is={value:"selectAll"},rs={value:"deselectAll"},ns={value:"activate"},cs={value:"deactivate"},ds={value:"left"},us={value:"noLeft"},ps={value:"main"},hs={value:"noMain"},_s={value:"right"},vs={value:"noRight"},fs={value:"delete"},ms={__name:"BulkActionSelect",props:{handleBulkAction:Function},emits:["change"],setup(f,{emit:x}){const{t:s}=P();return(b,p)=>(_(),g("div",ls,[e("label",os,i(o(s)("bulkActions")),1),e("select",{class:"w-auto px-3 py-0.5 form-select bg-white dark:bg-gray-200 text-gray-600 dark:text-gray-900 border border-slate-400 dark:border-slate-600 rounded-sm shadow-sm",onChange:p[0]||(p[0]=n=>b.$emit("change",n))},[e("option",as,i(o(s)("selectAction")),1),e("option",is,i(o(s)("selectAll")),1),e("option",rs,i(o(s)("deselectAll")),1),e("option",ns,i(o(s)("activate")),1),e("option",cs,i(o(s)("deactivate")),1),e("option",ds,i(o(s)("left")),1),e("option",us,i(o(s)("noLeft")),1),e("option",ps,i(o(s)("main")),1),e("option",hs,i(o(s)("noMain")),1),e("option",_s,i(o(s)("right")),1),e("option",vs,i(o(s)("noRight")),1),e("option",fs,i(o(s)("deleteSelected")),1)],32)]))}},gs={class:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-12xl mx-auto"},xs={class:"p-4 bg-slate-50 dark:bg-slate-700 border border-blue-400 dark:border-blue-200 overflow-hidden shadow-lg shadow-gray-500 dark:shadow-slate-400 bg-opacity-95 dark:bg-opacity-95"},ys={class:"sm:flex sm:justify-between sm:items-center mb-2"},ws=e("svg",{class:"w-4 h-4 fill-current opacity-50 shrink-0",viewBox:"0 0 16 16"},[e("path",{d:"M15 7H9V1c0-.6-.4-1-1-1S7 .4 7 1v6H1c-.6 0-1 .4-1 1s.4 1 1 1h6v6c0 .6.4 1 1 1s1-.4 1-1V9h6c.6 0 1-.4 1-1s-.4-1-1-1z"})],-1),bs={key:2,class:"flex justify-between items-center flex-col md:flex-row my-1"},Ns={__name:"Index",props:["videos","videosCount","adminCountVideos","adminSortVideos"],setup(f){const{t:x}=P(),s=te(),b=f,p=$(b.adminCountVideos);j(p,l=>{w.put(route("admin.settings.updateAdminCountVideos"),{value:l},{preserveScroll:!0,preserveState:!0,onSuccess:()=>s.info(`Показ ${l} элементов на странице.`),onError:t=>s.error(t.value||"Ошибка обновления кол-ва элементов.")})});const n=$(b.adminSortVideos);j(n,l=>{w.put(route("admin.settings.updateAdminSortVideos"),{value:l},{preserveScroll:!0,preserveState:!0,onSuccess:()=>s.info("Сортировка успешно изменена"),onError:t=>s.error(t.value||"Ошибка обновления сортировки.")})});const y=$(!1),k=$(null),A=$(""),T=(l,t)=>{k.value=l,A.value=t,y.value=!0},d=()=>{y.value=!1,k.value=null,A.value=""},m=()=>{if(k.value===null)return;const l=k.value,t=A.value;w.delete(route("admin.videos.destroy",{video:l}),{preserveScroll:!0,preserveState:!1,onSuccess:a=>{d(),s.success(`Видео "${t||"ID: "+l}" удалено.`)},onError:a=>{d();const u=a.general||a[Object.keys(a)[0]]||"Произошла ошибка при удалении.";s.error(`${u} (Видео: ${t||"ID: "+l})`),console.error("Ошибка удаления:",a)},onFinish:()=>{k.value=null,A.value=""}})},r=l=>{const t=!l.left,a=t?"активировано в левой колонке":"деактивировано в левой колонке";w.put(route("admin.actions.videos.updateLeft",{video:l.id}),{left:t},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{s.success(`Видео "${l.title}" ${a}.`)},onError:u=>{s.error(u.left||u.general||`Ошибка изменения активности для "${l.title}".`)}})},h=l=>{const t=!l.main,a=t?"активировано в главном":"деактивировано в главном";w.put(route("admin.actions.videos.updateMain",{video:l.id}),{main:t},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{s.success(`Видео "${l.title}" ${a}.`)},onError:u=>{s.error(u.main||u.general||`Ошибка изменения активности для "${l.title}".`)}})},J=l=>{const t=!l.right,a=t?"активировано в правой колонке":"деактивировано в правой колонке";w.put(route("admin.actions.videos.updateRight",{video:l.id}),{right:t},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{s.success(`Видео "${l.title}" ${a}.`)},onError:u=>{s.error(u.right||u.general||`Ошибка изменения активности для "${l.title}".`)}})},K=l=>{const t=!l.activity,a=t?"активировано":"деактивировано";w.put(route("admin.actions.videos.updateActivity",{video:l.id}),{activity:t},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{s.success(`Видео "${l.title}" ${a}.`)},onError:u=>{s.error(u.activity||u.general||`Ошибка изменения активности для "${l.title}".`)}})},V=$(1),C=$(""),Z=l=>n.value==="idAsc"?l.slice().sort((t,a)=>t.id-a.id):n.value==="idDesc"?l.slice().sort((t,a)=>a.id-t.id):n.value==="published_at"?l.slice().sort((t,a)=>a.id-t.id):n.value==="activity"?l.filter(t=>t.activity):n.value==="inactive"?l.filter(t=>!t.activity):n.value==="left"?l.filter(t=>t.left):n.value==="noLeft"?l.filter(t=>!t.left):n.value==="main"?l.filter(t=>t.main):n.value==="noMain"?l.filter(t=>!t.main):n.value==="right"?l.filter(t=>t.right):n.value==="noRight"?l.filter(t=>!t.right):n.value==="locale"?l.slice().sort((t,a)=>t.locale<a.locale?1:t.locale>a.locale?-1:0):n.value==="views"||n.value==="likes"?l.slice().sort((t,a)=>a[n.value]-t[n.value]):l.slice().sort((t,a)=>t[n.value]<a[n.value]?-1:t[n.value]>a[n.value]?1:0),E=B(()=>{let l=b.videos;return C.value&&(l=l.filter(t=>t.title.toLowerCase().includes(C.value.toLowerCase()))),Z(l)}),M=B(()=>{const l=(V.value-1)*p.value;return E.value.slice(l,l+p.value)});B(()=>Math.ceil(E.value.length/p.value));const G=l=>{const t=(V.value-1)*p.value,a=l.map((u,Y)=>({id:u,sort:t+Y+1}));w.put(route("admin.actions.videos.updateSortBulk"),{videos:a},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{s.success("Порядок видео успешно обновлен.")},onError:u=>{console.error("Ошибка обновления сортировки:",u),s.error(u.general||u.videos||"Не удалось обновить порядок видео."),w.reload({only:["videos"],preserveScroll:!0})}})},c=$([]),Q=({ids:l,checked:t})=>{t?c.value=[...new Set([...c.value,...l])]:c.value=c.value.filter(a=>!l.includes(a))},q=l=>{const t=c.value.indexOf(l);t>-1?c.value.splice(t,1):c.value.push(l)},I=l=>{if(!c.value.length){s.warning("Выберите видео для активации/деактивации видео");return}z.put(route("admin.actions.videos.bulkUpdateActivity"),{ids:c.value,activity:l}).then(()=>{s.success("Активность массово обновлена");const t=[...c.value];c.value=[],M.value.forEach(a=>{t.includes(a.id)&&(a.activity=l)})}).catch(()=>{s.error("Не удалось обновить активность")})},U=l=>{if(c.value.length===0){s.warning(`Выберите видео для ${l?"активации в левой колонки":"деактивации в левой колонки"}.`);return}z.put(route("admin.actions.videos.bulkUpdateLeft"),{ids:c.value,left:l}).then(()=>{s.success("Статус в левой колонки массово обновлен");const t=[...c.value];c.value=[],M.value.forEach(a=>{t.includes(a.id)&&(a.left=l)})}).catch(()=>{s.error("Не удалось обновить статус в левой колонке")})},N=l=>{if(c.value.length===0){s.warning(`Выберите видео для ${l?"активации":"деактивации"}.`);return}if(c.value.length===0){s.warning(`Выберите видео для ${l?"активации в главном":"деактивации в главном"}.`);return}z.put(route("admin.actions.videos.bulkUpdateMain"),{ids:c.value,main:l}).then(()=>{s.success("Статус в главном массово обновлен");const t=[...c.value];c.value=[],M.value.forEach(a=>{t.includes(a.id)&&(a.main=l)})}).catch(()=>{s.error("Не удалось обновить статус в главном")})},O=l=>{if(c.value.length===0){s.warning(`Выберите видео для ${l?"активации":"деактивации"}.`);return}z.put(route("admin.actions.videos.bulkUpdateRight"),{ids:c.value,right:l}).then(()=>{s.success("Статус в правой колонки массово обновлен");const t=[...c.value];c.value=[],M.value.forEach(a=>{t.includes(a.id)&&(a.right=l)})}).catch(()=>{s.error("Не удалось обновить статус в правой колонке")})},W=()=>{if(c.value.length===0){s.warning("Выберите хотя бы одно видео для удаления.");return}confirm("Вы уверены, что хотите их удалить ?")&&w.delete(route("admin.actions.videos.bulkDestroy"),{data:{ids:c.value},preserveScroll:!0,preserveState:!1,onSuccess:l=>{c.value=[],s.success("Массовое удаление видео успешно завершено.")},onError:l=>{console.error("Ошибка массового удаления:",l);const t=Object.keys(l)[0],a=l[t]||"Произошла ошибка при удалении видео.";s.error(a)}})},X=l=>{const t=l.target.value;t==="selectAll"?c.value=M.value.map(a=>a.id):t==="deselectAll"?c.value=[]:t==="activate"?I(!0):t==="deactivate"?I(!1):t==="left"?U(!0):t==="noLeft"?U(!1):t==="main"?N(!0):t==="noMain"?N(!1):t==="right"?O(!0):t==="noRight"?O(!1):t==="delete"&&W(),l.target.value=""};return(l,t)=>(_(),L(se,{title:o(x)("videos")},{header:S(()=>[v(le,null,{default:S(()=>[R(i(o(x)("videos")),1)]),_:1})]),default:S(()=>[e("div",gs,[e("div",xs,[e("div",ys,[v(oe,{href:l.route("admin.videos.create")},{icon:S(()=>[ws]),default:S(()=>[R(" "+i(o(x)("addVideo")),1)]),_:1},8,["href"]),f.videosCount?(_(),L(ms,{key:0,onChange:X})):D("",!0)]),f.videosCount?(_(),L(ne,{key:0,modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=a=>C.value=a),placeholder:o(x)("searchByName")},null,8,["modelValue","placeholder"])):D("",!0),f.videosCount?(_(),L(ie,{key:1},{default:S(()=>[R(i(f.videosCount),1)]),_:1})):D("",!0),v(Bt,{videos:M.value,"selected-videos":c.value,onToggleLeft:r,onToggleMain:h,onToggleRight:J,onToggleActivity:K,onDelete:T,onUpdateSortOrder:G,onToggleSelect:q,onToggleAll:Q},null,8,["videos","selected-videos"]),f.videosCount?(_(),g("div",bs,[v(ce,{"items-per-page":p.value,"onUpdate:itemsPerPage":t[1]||(t[1]=a=>p.value=a)},null,8,["items-per-page"]),v(de,{"current-page":V.value,"items-per-page":p.value,"total-items":E.value.length,"onUpdate:currentPage":t[2]||(t[2]=a=>V.value=a),"onUpdate:itemsPerPage":t[3]||(t[3]=a=>p.value=a)},null,8,["current-page","items-per-page","total-items"]),v(ss,{sortParam:n.value,"onUpdate:sortParam":t[4]||(t[4]=a=>n.value=a)},null,8,["sortParam"])])):D("",!0)])]),v(re,{show:y.value,onClose:d,onCancel:d,onConfirm:m,cancelText:o(x)("cancel"),confirmText:o(x)("yesDelete")},null,8,["show","cancelText","confirmText"])]),_:1},8,["title"]))}};export{Ns as default};
