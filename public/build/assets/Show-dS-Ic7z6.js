import{u as A,Q as F,l as S,z as H,aR as E,m as c,o as r,f as e,A as R,I as q,n as w,ap as O,k as t,q as I,F as C,v as j,e as x,w as g,J as v,i as b,t as u,p as M,E as B,L as Q,a4 as W,G,aL as J}from"./vendor-CMULZhQa.js";import{a as Y,V as Z,_ as K}from"./DefaultLayout-17nvjrKQ.js";import"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-3g6-h99u.js";import"./ResponsiveNavLink-BBt1gw6L.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LogoutButton-BnL5i-Bj.js";import"./ScrollButtons-DjRj6zOj.js";import"./app-BmuzEqX8.js";const X={class:"flex flex-row items-center gap-4 mb-4"},ee={class:"relative w-full max-w-lg mx-auto"},te=["placeholder"],se=["title"],ae=e("svg",{class:"w-4 h-4",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill-current text-slate-500 dark:text-slate-300",d:"M7 14c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7zM7 2C4.243 2 2 4.243 2 7s2.243 5 5 5 5-2.243 5-5-2.243-5-5-5z"}),e("path",{class:"fill-current text-slate-400 dark:text-slate-200",d:"M15.707 14.293L13.314 11.9a8.019 8.019 0 01-1.414 1.414l2.393 2.393a.997.997 0 001.414 0 .999.999 0 000-1.414z"})],-1),re=[ae],oe={class:"flex justify-end items-center space-x-2"},le=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),ne=[le],ie=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 12h16M4 18h16"})],-1),de=[ie],ce={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},ue={class:"overflow-hidden h-auto mb-2 rounded-md shadow-lg shadow-gray-400 dark:shadow-gray-900"},he=["src","alt"],ge={class:"text-gray-500 dark:text-gray-700"},me={class:"flex flex-col"},ve={class:"text-md font-semibold text-black dark:text-white my-1"},_e={class:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2"},fe={class:"flex items-center justify-center text-xs font-semibold text-center text-slate-600 dark:text-slate-400 opacity-75"},xe=e("svg",{class:"w-3 h-3 fill-current shrink-0 mr-1",viewBox:"0 0 16 16"},[e("path",{d:"M15 2h-2V0h-2v2H9V0H7v2H5V0H3v2H1a1 1 0 00-1 1v12a1 1 0 001 1h14a1 1 0 001-1V3a1 1 0 00-1-1zm-1 12H2V6h12v8z"})],-1),be={key:1,class:"space-y-4"},pe={class:"w-full sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-56 h-auto shrink-0 overflow-hidden rounded-md"},ke=["src","alt"],ye={class:"text-slate-900 dark:text-slate-100"},we={class:"flex flex-col flex-grow"},$e={class:"text-md font-semibold text-black dark:text-white my-1"},Se={class:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2"},Me={class:"flex items-center justify-center text-xs font-semibold text-center text-slate-600 dark:text-slate-400 opacity-75"},Ve=e("svg",{class:"w-3 h-3 fill-current shrink-0 mr-1",viewBox:"0 0 16 16"},[e("path",{d:"M15 2h-2V0h-2v2H9V0H7v2H5V0H3v2H1a1 1 0 00-1 1v12a1 1 0 001 1h14a1 1 0 001-1V3a1 1 0 00-1-1zm-1 12H2V6h12v8z"})],-1),ze={class:"flex items-center justify-center mt-6 space-x-2 text-sm font-medium"},He=["disabled"],Ce=["value","max"],je={class:"text-gray-700 dark:text-gray-200"},Be=["disabled"],Ie={__name:"SectionArticles",props:{articles:Array,pagination:Object,baseUrl:String,search:String},setup(d){const{t:_}=A(),{appUrl:a}=F().props,i=o=>{if(!o)return"";const l=a.endsWith("/")?a.slice(0,-1):a,s=o.startsWith("/")?o.slice(1):o;return`${l}/storage/${s}`},h=d,p=S(h.search||""),$=()=>{const o=p.value.trim();B.get(h.baseUrl,{search:o},{preserveScroll:!0,preserveState:!1})},V=()=>{p.value="",B.get(h.baseUrl,{},{preserveScroll:!0,preserveState:!1})},f=o=>{const l=new Date(o),s=String(l.getDate()).padStart(2,"0"),m=String(l.getMonth()+1).padStart(2,"0"),z=l.getFullYear();return`${s}.${m}.${z}`},n=S("horizontal");H(()=>{localStorage.getItem("articleViewMode")==="grid"&&(n.value="grid")});const k=o=>{n.value=o,localStorage.setItem("articleViewMode",o)},y=o=>{o>=1&&o<=h.pagination.lastPage&&B.get(h.baseUrl,{page_articles:o},{preserveScroll:!0,preserveState:!1,only:["articles","pagination"]})};return H(()=>{const o=localStorage.getItem("scrollY");o!==null&&(window.scrollTo(0,parseInt(o)),localStorage.removeItem("scrollY"))}),E(()=>{localStorage.setItem("scrollY",window.scrollY)}),(o,l)=>(r(),c("div",null,[e("div",X,[e("form",{onSubmit:R($,["prevent"]),class:"flex-grow"},[e("div",ee,[q(e("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>p.value=s),type:"text",placeholder:t(_)("searchByName"),class:"w-full pl-3 pr-16 py-1 bg-slate-100 dark:bg-slate-600 font-semibold text-sm text-slate-600 dark:text-slate-100 border border-slate-500 dark:border-slate-400 rounded-sm focus:outline-none focus:ring-1 focus:border-blue-300"},null,8,te),[[O,p.value]]),p.value?(r(),c("button",{key:0,type:"button",onClick:V,class:"absolute right-8 top-1/2 transform -translate-y-1/2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-800 border border-gray-900 dark:border-gray-100 py-0 px-1.5 text-slate-700 dark:text-white hover:text-red-500",title:"Очистить"}," ✕ ")):w("",!0),e("button",{type:"submit",class:"absolute right-1 top-1/2 transform -translate-y-1/2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-800 border border-gray-900 dark:border-gray-100 p-1",title:t(_)("searchByName")},re,8,se)])],32),e("div",oe,[e("button",{onClick:l[1]||(l[1]=s=>k("grid")),class:I(["p-1 border transition-colors duration-200 rounded",n.value==="grid"?"border-slate-400 dark:border-slate-200 text-red-400 dark:text-red-200":"border-slate-300 dark:border-slate-400 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 hover:border-slate-500 dark:hover:border-slate-500"])},ne,2),e("button",{onClick:l[2]||(l[2]=s=>k("horizontal")),class:I(["p-1 border transition-colors duration-200 rounded",n.value==="horizontal"?"border-slate-400 dark:border-slate-200 text-red-400 dark:text-red-200":"border-slate-300 dark:border-slate-400 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 hover:border-slate-500 dark:hover:border-slate-500"])},de,2)])]),n.value==="grid"?(r(),c("div",ce,[(r(!0),c(C,null,j(d.articles,s=>{var m;return r(),c("div",{key:s.id,class:"p-2 rounded-sm shadow-sm overflow-hidden hover:bg-slate-50 dark:hover:bg-slate-800 hover:shadow-md hover:shadow-gray-400 dark:hover:shadow-gray-700"},[e("div",ue,[s.img?(r(),x(t(v),{key:0,href:`/articles/${s.url}`},{default:g(()=>[e("img",{src:i(s.img),alt:s.img.alt,class:"w-full h-auto object-cover",loading:"lazy"},null,8,he)]),_:2},1032,["href"])):(m=s.images)!=null&&m.length?(r(),x(t(v),{key:1,href:`/articles/${s.url}`},{default:g(()=>[b(Y,{images:s.images,link:`/articles/${s.url}`},null,8,["images","link"])]),_:2},1032,["href"])):(r(),x(t(v),{key:2,href:`/articles/${s.url}`,class:"flex items-center justify-center bg-gray-200 dark:bg-gray-400 h-32"},{default:g(()=>[e("span",ge,u(t(_)("noCurrentImage")),1)]),_:2},1032,["href"]))]),e("div",me,[e("h3",ve,[b(t(v),{href:`/articles/${s.url}`,class:"hover:text-blue-600 dark:hover:text-blue-400"},{default:g(()=>[M(u(s.title),1)]),_:2},1032,["href"])]),e("p",_e,u(s.short),1),e("div",fe,[xe,e("span",null,u(f(s.published_at)),1)])])])}),128))])):(r(),c("div",be,[(r(!0),c(C,null,j(d.articles,s=>{var m;return r(),c("div",{key:s.id,class:"col-span-full flex flex-col sm:flex-row items-start space-x-3 p-2 overflow-hidden hover:bg-slate-50 dark:hover:bg-slate-800 hover:shadow-md hover:shadow-gray-400 dark:hover:shadow-gray-700"},[e("div",pe,[s.img?(r(),x(t(v),{key:0,href:`/articles/${s.url}`},{default:g(()=>[e("img",{src:i(s.img),alt:s.img.alt,class:"w-full h-auto object-cover",loading:"lazy"},null,8,ke)]),_:2},1032,["href"])):(m=s.images)!=null&&m.length?(r(),x(t(v),{key:1,href:`/articles/${s.url}`},{default:g(()=>[b(Y,{images:s.images,link:`/articles/${s.url}`},null,8,["images","link"])]),_:2},1032,["href"])):(r(),x(t(v),{key:2,href:`/articles/${s.url}`,class:"flex items-center justify-center bg-gray-200 dark:bg-gray-400 h-32"},{default:g(()=>[e("span",ye,u(t(_)("noCurrentImage")),1)]),_:2},1032,["href"]))]),e("div",we,[e("h3",$e,[b(t(v),{href:`/articles/${s.url}`,class:"hover:text-blue-600 dark:hover:text-blue-400"},{default:g(()=>[M(u(s.title),1)]),_:2},1032,["href"])]),e("p",Se,u(s.short),1),e("div",Me,[Ve,e("span",null,u(f(s.published_at)),1)])])])}),128))])),e("div",ze,[e("button",{onClick:l[3]||(l[3]=s=>y(d.pagination.currentPage-1)),disabled:d.pagination.currentPage===1,class:"px-3 py-1 rounded bg-slate-100 dark:bg-slate-600 text-gray-900 dark:text-gray-100 border border-gray-400 dark:border-gray-200 disabled:opacity-50"}," « ",8,He),e("input",{type:"number",value:d.pagination.currentPage,onChange:l[4]||(l[4]=s=>y(Number(s.target.value))),min:1,max:d.pagination.lastPage,class:"w-16 text-center px-3 py-1.5 rounded text-xs border border-gray-400 dark:border-gray-200 bg-slate-100 dark:bg-slate-600 text-gray-900 dark:text-white"},null,40,Ce),e("span",je,"/ "+u(d.pagination.lastPage),1),e("button",{onClick:l[5]||(l[5]=s=>y(d.pagination.currentPage+1)),disabled:d.pagination.currentPage===d.pagination.lastPage,class:"px-3 py-1 rounded bg-slate-100 dark:bg-slate-600 text-gray-900 dark:text-gray-100 border border-gray-400 dark:border-gray-200 disabled:opacity-50"}," » ",8,Be)])]))}},De={key:0,class:"mt-8 w-full overflow-hidden"},Le={class:"w-full transition-opacity duration-700"},Pe=["src","alt","title"],Ue=["src","alt","title"],Ne={key:2,src:"/banner_images/default-image.png",alt:"Нет изображения",class:"w-full h-auto object-contain mx-auto opacity-50 transition-transform duration-500",loading:"lazy"},Te={__name:"MainBannerSlider",props:{banners:{type:Array,required:!0}},setup(d){const _=d,a=S(0),i=S(!1);let h=null;const p=()=>{$(),_.banners.length>1&&(h=setInterval(()=>{i.value||(a.value=(a.value+1)%_.banners.length)},5e3))},$=()=>{h&&(clearInterval(h),h=null)};return H(p),E($),(V,f)=>d.banners.length?(r(),c("div",De,[e("div",{class:"relative w-full",onMouseenter:f[0]||(f[0]=n=>i.value=!0),onMouseleave:f[1]||(f[1]=n=>i.value=!1)},[(r(!0),c(C,null,j(d.banners,(n,k)=>{var y,o,l,s,m,z,D,L;return r(),c("div",{key:n.id},[q(e("div",Le,[n.link?(r(),x(t(v),{key:0,href:n.link,class:"block w-full"},{default:g(()=>{var P,U,N,T;return[e("img",{src:((U=(P=n.images)==null?void 0:P[0])==null?void 0:U.webp_url)||((T=(N=n.images)==null?void 0:N[0])==null?void 0:T.url)||"/images/no-image.svg",alt:n.title||"",title:n.title||"",class:"w-full h-auto object-contain mx-auto transition-transform duration-500",loading:"lazy"},null,8,Pe)]}),_:2},1032,["href"])):(o=(y=n.images)==null?void 0:y[0])!=null&&o.webp_url||(s=(l=n.images)==null?void 0:l[0])!=null&&s.url?(r(),c("img",{key:1,src:((z=(m=n.images)==null?void 0:m[0])==null?void 0:z.webp_url)||((L=(D=n.images)==null?void 0:D[0])==null?void 0:L.url),alt:n.title||"",title:n.title||"",class:"w-full h-auto object-contain mx-auto transition-transform duration-500",loading:"lazy"},null,8,Ue)):(r(),c("img",Ne))],512),[[Q,a.value===k]])])}),128))],32)])):w("",!0)}},Ye={key:0,class:"mt-8 space-y-6"},Ae={class:"flex flex-col gap-4"},Fe={class:"flex items-center justify-center text-center text-xs text-slate-600 dark:text-slate-400"},Ee=e("svg",{class:"w-3 h-3 fill-current shrink-0 mr-1",viewBox:"0 0 16 16"},[e("path",{d:"M15 2h-2V0h-2v2H9V0H7v2H5V0H3v2H1a1 1 0 00-1 1v12a1 1 0 001 1h14a1 1 0 001-1V3a1 1 0 00-1-1zm-1 12H2V6h12v8z"})],-1),qe={key:0,class:"flex items-center tracking-wide text-sm text-black dark:text-white"},Re={__name:"SectionVideoList",props:{videos:{type:Array,default:()=>[]}},setup(d){return(_,a)=>d.videos.length?(r(),c("section",Ye,[e("div",Ae,[(r(!0),c(C,null,j(d.videos,i=>(r(),c("div",{key:i.id,class:"mb-4 pb-4 border-b border-slate-500 dark:border-slate-100"},[b(t(v),{href:`/videos/${i.url}`},{default:g(()=>[b(Z,{video:i},null,8,["video"])]),_:2},1032,["href"]),e("div",Fe,[Ee,e("span",null,u(i.published_at?new Date(i.published_at).toLocaleDateString():""),1)]),b(t(v),{href:`/videos/${i.url}`,class:"my-1 block text-center text-md font-semibold text-black dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition"},{default:g(()=>[M(u(i.title),1)]),_:2},1032,["href"]),i.short?(r(),c("p",qe,u(i.short),1)):w("",!0)]))),128))])])):w("",!0)}},Oe=["content"],Qe=["content"],We=["content"],Ge=["content"],Je=["content"],Ze=e("meta",{property:"og:type",content:"website"},null,-1),Ke=["content"],Xe=["content"],et=["content"],tt=e("meta",{name:"twitter:card",content:"summary_large_image"},null,-1),st=["content"],at=["content"],rt=["content"],ot=["content"],lt=["content"],nt=["content"],it=["content"],dt={class:"text-sm","aria-label":"Breadcrumb"},ct={class:"list-reset flex items-center space-x-0"},ut=e("li",null,[e("span",{class:"mx-1 text-slate-900 dark:text-slate-100"},"/")],-1),ht={class:"text-slate-900 dark:text-slate-100"},gt={class:"flex items-center justify-center my-4 text-center font-bolder text-xl text-slate-900 dark:text-slate-100"},mt=["innerHTML"],vt=["title"],St={__name:"Show",setup(d){const{t:_}=A(),{rubric:a,sectionBanners:i,sectionVideos:h,articles:p,pagination:$,locale:V,siteSettings:f}=F().props,n=S(!1);let k;const y=()=>{n.value=document.documentElement.classList.contains("dark")};H(()=>{y(),k=new MutationObserver(y),k.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}),W(()=>{k&&k.disconnect()});const o=G(()=>n.value?f.PublicDarkBackgroundColor:f.PublicLightBackgroundColor);return(l,s)=>(r(),x(K,{title:t(a).title,"can-login":l.$page.props.canLogin,"can-register":l.$page.props.canRegister},{default:g(()=>{var m;return[b(t(J),null,{default:g(()=>[e("title",null,u(t(a).title),1),e("meta",{name:"title",content:t(a).title||""},null,8,Oe),e("meta",{name:"keywords",content:t(a).meta_keywords||""},null,8,Qe),e("meta",{name:"description",content:t(a).meta_desc||""},null,8,We),e("meta",{property:"og:title",content:t(a).title||""},null,8,Ge),e("meta",{property:"og:description",content:t(a).meta_desc||""},null,8,Je),Ze,e("meta",{property:"og:url",content:`/rubrics/${t(a).url}`},null,8,Ke),e("meta",{property:"og:image",content:t(a).icon||""},null,8,Xe),e("meta",{property:"og:locale",content:t(a).locale||"ru_RU"},null,8,et),tt,e("meta",{name:"twitter:title",content:t(a).title||""},null,8,st),e("meta",{name:"twitter:description",content:t(a).meta_desc||""},null,8,at),e("meta",{name:"twitter:image",content:t(a).icon||""},null,8,rt),e("meta",{name:"DC.title",content:t(a).title||""},null,8,ot),e("meta",{name:"DC.description",content:t(a).meta_desc||""},null,8,lt),e("meta",{name:"DC.identifier",content:`/rubrics/${t(a).url}`},null,8,nt),e("meta",{name:"DC.language",content:t(a).locale||"ru"},null,8,it)]),_:1}),e("div",{class:I(["flex-1 p-4",[o.value]])},[e("nav",dt,[e("ol",ct,[e("li",null,[b(t(v),{href:"/",class:"hover:underline text-slate-900 dark:text-slate-100"},{default:g(()=>[M(u(t(_)("home")),1)]),_:1})]),ut,e("li",ht,u(t(a).title),1)])]),e("h1",gt,[t(a).icon?(r(),c("span",{key:0,class:"flex justify-center",innerHTML:t(a).icon},null,8,mt)):w("",!0),M(" "+u(t(a).title)+" ",1),e("div",{class:"ml-2 w-6 h-5 flex items-center justify-center rounded-full text-[9px] font-semibold text-black dark:text-white bg-slate-100 dark:bg-slate-700",title:t(_)("views")},u(t(a).views),9,vt)]),b(Ie,{articles:t(p).data,pagination:t($),"base-url":`/${t(V)}/rubrics/${t(a).url}`,search:((m=l.$page.props.filters)==null?void 0:m.search)??""},null,8,["articles","pagination","base-url","search"]),t(i)&&t(i).length?(r(),x(Te,{key:0,banners:t(i)},null,8,["banners"])):w("",!0),t(h)&&t(h).length?(r(),x(Re,{key:1,videos:t(h)},null,8,["videos"])):w("",!0)],2)]}),_:1},8,["title","can-login","can-register"]))}};export{St as default};
