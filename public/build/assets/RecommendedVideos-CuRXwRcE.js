import{u as z,l as _,z as C,a4 as N,m as l,n as y,o as r,f as s,t as u,k as f,F as p,v as k,q as B,p as w,i as I,w as L,J as M,N as R,O as $}from"./vendor-gheHEdqg.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V=a=>(R("data-v-257b3499"),a=a(),$(),a),U={key:0,class:"mt-4"},D={class:"mb-4 tracking-wide text-center font-semibold text-lg text-black dark:text-white"},E={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 gap-3"},T={class:"relative w-full bg-black aspect-video overflow-hidden"},F={key:0,class:"relative w-full h-full"},q=["src","alt"],A={class:"absolute inset-0 flex items-center justify-center z-20"},J=["onClick"],O=V(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8 text-red-600",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M8 5v14l11-7z"})],-1)),P=[O],G=["innerHTML"],K=["src"],Q={key:2,class:"w-full h-full object-contain",controls:""},W=["src"],X={class:"text-center text-sm font-semibold text-slate-800 dark:text-slate-100 pt-1"},Y={class:"pb-2 flex items-center justify-center text-center text-xs text-slate-600 dark:text-slate-400"},Z=V(()=>s("svg",{class:"w-3 h-3 fill-current shrink-0 mr-1",viewBox:"0 0 16 16"},[s("path",{d:"M15 2h-2V0h-2v2H9V0H7v2H5V0H3v2H1a1 1 0 00-1 1v12a1 1 0 001 1h14a1 1 0 001-1V3a1 1 0 00-1-1zm-1 12H2V6h12v8z"})],-1)),ee={__name:"RecommendedVideos",props:{videos:Array},setup(a){const m=a,{t:b}=z(),n=_({}),x=_({}),i=_({}),S=(e,o)=>{h(e),o>1&&(i.value[e]=setInterval(()=>{n.value[e]=(n.value[e]+1)%o},4e3))},h=e=>{i.value[e]&&(clearInterval(i.value[e]),delete i.value[e])},H=e=>{x.value[e]=!0,h(e)},v=e=>{const o=e.source_type,t=e.external_video_id;try{if(o==="youtube")return`https://www.youtube.com/embed/${new URL(t).searchParams.get("v")}`;if(o==="vimeo"){const c=t.match(/vimeo\.com\/(?:video\/)?(\d+)/);return c?`https://player.vimeo.com/video/${c[1]}`:null}if(o==="local")return e.video_url||`/storage/${t}`;if(o==="code")return e.video_code||e.embed_code||null}catch(c){return console.error("âŒ Video URL error:",c),null}return null};return C(()=>{m.videos.forEach(e=>{var o;n.value[e.id]=0,((o=e.images)==null?void 0:o.length)>1&&S(e.id,e.images.length)})}),N(()=>{m.videos.forEach(e=>h(e.id))}),(e,o)=>a.videos&&a.videos.length>0?(r(),l("div",U,[s("h2",D,u(f(b)("relatedVideos")),1),s("div",E,[(r(!0),l(p,null,k(a.videos,t=>{var c;return r(),l("div",{key:t.id,class:"relative flex flex-col rounded overflow-hidden bg-slate-100 dark:bg-slate-700 border-2 border-slate-400 shadow-md shadow-gray-400 dark:shadow-gray-800"},[s("div",T,[(c=t.images)!=null&&c.length&&!x.value[t.id]?(r(),l("div",F,[(r(!0),l(p,null,k(t.images,(d,g)=>(r(),l("img",{key:d.id||g,src:d.url,alt:d.alt||t.title,class:B(["slide-fade w-full h-full object-cover",{"slide-fade-active":g===n.value[t.id]}])},null,10,q))),128)),s("div",A,[s("button",{onClick:d=>H(t.id),class:"bg-white/30 hover:bg-white/40 backdrop-blur-md rounded-full p-2 border-8 border-white/30"},P,8,J)])])):(r(),l(p,{key:1},[t.source_type==="code"?(r(),l("div",{key:0,class:"w-full h-full",innerHTML:v(t)},null,8,G)):["youtube","vimeo"].includes(t.source_type)?(r(),l("iframe",{key:1,class:"w-full h-full",src:v(t),style:{width:"100% !important","aspect-ratio":"16 / 9 !important",display:"block !important"},frameborder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowfullscreen:""},null,8,K)):t.source_type==="local"?(r(),l("video",Q,[s("source",{src:v(t),type:"video/mp4"},null,8,W),w(" "+u(f(b)("videoNotSupported")),1)])):y("",!0)],64))]),s("div",X,[I(f(M),{href:`/videos/${t.url}`,class:"block text-sm font-semibold text-slate-800 dark:text-slate-100 hover:text-red-600 hover:dark:text-red-400 transition"},{default:L(()=>[w(u(t.title),1)]),_:2},1032,["href"]),s("div",Y,[Z,w(" "+u(t.published_at?new Date(t.published_at).toLocaleDateString():""),1)])])])}),128))])])):y("",!0)}},oe=j(ee,[["__scopeId","data-v-257b3499"]]);export{oe as R};
