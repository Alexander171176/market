import{u as L,Q as j,l as k,G as N,z as Y,aR as E,e as F,o as l,w as h,i as c,f as e,k as r,aL as T,t as o,q as _,m as i,J as b,p as v,A as Z,I as q,n as f,ap as Q,F as B,v as C,E as y}from"./vendor-CMULZhQa.js";import{V as H,_ as R}from"./DefaultLayout-17nvjrKQ.js";import"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-3g6-h99u.js";import"./ResponsiveNavLink-BBt1gw6L.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LogoutButton-BnL5i-Bj.js";import"./ScrollButtons-DjRj6zOj.js";import"./app-BmuzEqX8.js";const U=["content"],A=["content"],G={class:"text-sm","aria-label":"Breadcrumb"},J={class:"list-reset flex items-center space-x-0"},O=e("li",null,[e("span",{class:"mx-1 text-slate-900 dark:text-slate-100"},"/")],-1),K={class:"text-slate-900 dark:text-slate-100"},W={class:"flex items-center justify-center my-4 text-center font-bolder text-xl text-slate-900 dark:text-slate-100"},X=e("svg",{class:"w-4 h-3 fill-slate-400 mr-2",viewBox:"0 0 16 12"},[e("path",{d:"m16 2-4 2.4V2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7.6l4 2.4V2ZM2 10V2h8v8H2Z"})],-1),ee={class:"flex flex-row items-center gap-4 mb-4"},te={class:"relative w-full max-w-lg mx-auto"},re=["placeholder"],ae=["title"],se=e("svg",{class:"w-4 h-4",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill-current text-slate-500 dark:text-slate-300",d:"M7 14c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7zM7 2C4.243 2 2 4.243 2 7s2.243 5 5 5 5-2.243 5-5-2.243-5-5-5z"}),e("path",{class:"fill-current text-slate-400 dark:text-slate-200",d:"M15.707 14.293L13.314 11.9a8.019 8.019 0 01-1.414 1.414l2.393 2.393a.997.997 0 001.414 0 .999.999 0 000-1.414z"})],-1),oe=[se],le={class:"flex justify-end items-center space-x-2"},ne=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),de=[ne],ie=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 12h16M4 18h16"})],-1),ce=[ie],ue={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},he={class:"flex items-center justify-center text-center text-xs text-slate-600 dark:text-slate-400"},ge=e("svg",{class:"w-3 h-3 fill-current shrink-0 mr-1",viewBox:"0 0 16 16"},[e("path",{d:"M15 2h-2V0h-2v2H9V0H7v2H5V0H3v2H1a1 1 0 00-1 1v12a1 1 0 001 1h14a1 1 0 001-1V3a1 1 0 00-1-1zm-1 12H2V6h12v8z"})],-1),be={key:0,class:"flex items-center tracking-wide text-xs text-black dark:text-white"},xe={key:1,class:"grid grid-cols-1 gap-2"},ve={class:"flex items-center justify-center text-center text-sm text-slate-600 dark:text-slate-400"},me=e("svg",{class:"w-3 h-3 fill-current shrink-0 mr-1",viewBox:"0 0 16 16"},[e("path",{d:"M15 2h-2V0h-2v2H9V0H7v2H5V0H3v2H1a1 1 0 00-1 1v12a1 1 0 001 1h14a1 1 0 001-1V3a1 1 0 00-1-1zm-1 12H2V6h12v8z"})],-1),pe={key:0,class:"flex items-center tracking-wide text-sm text-black dark:text-white"},ke={class:"flex items-center justify-center mt-6 space-x-2 text-sm font-medium"},_e=["disabled"],fe=["value","max"],ye={class:"text-gray-700 dark:text-gray-200"},we=["disabled"],Le={__name:"Index",setup(Ve){const{t:n}=L(),P=j(),{videos:w,pagination:d,locale:Me,siteSettings:V,filters:m}=P.props,M=k(!1);let x;const S=()=>{M.value=document.documentElement.classList.contains("dark")},$=N(()=>M.value?V.PublicDarkBackgroundColor:V.PublicLightBackgroundColor),u=k(""),D=()=>{const s=u.value.trim();y.get("/videos",{search:s},{preserveScroll:!0,preserveState:!1})},I=()=>{u.value="",y.get("/videos",{},{preserveScroll:!0,preserveState:!1})},g=k("horizontal"),z=s=>{g.value=s,localStorage.setItem("videoViewMode",s)},p=s=>{s>=1&&s<=d.lastPage&&y.get("/videos",{page_videos:s,search:u.value.trim()},{preserveScroll:!0,preserveState:!1,only:["videos","pagination"]})};return Y(()=>{S(),x=new MutationObserver(S),x.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),u.value=(m==null?void 0:m.search)||"";const s=localStorage.getItem("videoViewMode");g.value=s==="grid"?"grid":"horizontal";const a=localStorage.getItem("scrollY");a!==null&&(window.scrollTo(0,parseInt(a)),localStorage.removeItem("scrollY"))}),E(()=>{x&&x.disconnect(),localStorage.setItem("scrollY",window.scrollY)}),(s,a)=>(l(),F(R,{title:r(n)("allVideos"),"can-login":s.$page.props.canLogin,"can-register":s.$page.props.canRegister},{default:h(()=>[c(r(T),null,{default:h(()=>[e("title",null,o(r(n)("allVideos")),1),e("meta",{name:"title",content:r(n)("allVideos")},null,8,U),e("meta",{name:"description",content:r(n)("allVideos")},null,8,A)]),_:1}),e("div",{class:_(["flex-1 p-4",[$.value]])},[e("nav",G,[e("ol",J,[e("li",null,[c(r(b),{href:"/",class:"hover:underline text-slate-900 dark:text-slate-100"},{default:h(()=>[v(o(r(n)("home")),1)]),_:1})]),O,e("li",K,o(r(n)("allVideos")),1)])]),e("h1",W,[X,v(" "+o(r(n)("allVideos")),1)]),e("div",ee,[e("form",{onSubmit:Z(D,["prevent"]),class:"flex-grow"},[e("div",te,[q(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>u.value=t),type:"text",placeholder:r(n)("searchByName"),class:"w-full pl-3 pr-16 py-1 bg-slate-100 dark:bg-slate-600 font-semibold text-sm text-slate-600 dark:text-slate-100 border border-slate-500 dark:border-slate-400 rounded-sm focus:outline-none focus:ring-1 focus:border-blue-300"},null,8,re),[[Q,u.value]]),u.value?(l(),i("button",{key:0,type:"button",onClick:I,class:"absolute right-8 top-1/2 transform -translate-y-1/2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-800 border border-gray-900 dark:border-gray-100 py-0 px-1.5 text-slate-700 dark:text-white hover:text-red-500",title:"Очистить"}," ✕ ")):f("",!0),e("button",{type:"submit",class:"absolute right-1 top-1/2 transform -translate-y-1/2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-800 border border-gray-900 dark:border-gray-100 p-1",title:r(n)("searchByName")},oe,8,ae)])],32),e("div",le,[e("button",{onClick:a[1]||(a[1]=t=>z("grid")),class:_(["p-1 border transition-colors duration-200 rounded",g.value==="grid"?"border-slate-400 dark:border-slate-200 text-red-400 dark:text-red-200":"border-slate-300 dark:border-slate-400 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 hover:border-slate-500 dark:hover:border-slate-500"])},de,2),e("button",{onClick:a[2]||(a[2]=t=>z("horizontal")),class:_(["p-1 border transition-colors duration-200 rounded",g.value==="horizontal"?"border-slate-400 dark:border-slate-200 text-red-400 dark:text-red-200":"border-slate-300 dark:border-slate-400 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 hover:border-slate-500 dark:hover:border-slate-500"])},ce,2)])]),g.value==="grid"?(l(),i("div",ue,[(l(!0),i(B,null,C(r(w).data,t=>(l(),i("div",{key:t.id,class:"mb-4 pb-4 border-b border-slate-500 dark:border-slate-100"},[c(r(b),{href:`/videos/${t.url}`},{default:h(()=>[c(H,{video:t},null,8,["video"])]),_:2},1032,["href"]),e("div",he,[ge,e("span",null,o(t.published_at?new Date(t.published_at).toLocaleDateString():""),1)]),c(r(b),{href:`/videos/${t.url}`,class:"my-1 block text-center text-sm font-semibold text-black dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition"},{default:h(()=>[v(o(t.title),1)]),_:2},1032,["href"]),t.short?(l(),i("p",be,o(t.short),1)):f("",!0)]))),128))])):(l(),i("div",xe,[(l(!0),i(B,null,C(r(w).data,t=>(l(),i("div",{key:t.id,class:"mb-4 pb-4 border-b border-slate-500 dark:border-slate-100"},[c(r(b),{href:`/videos/${t.url}`},{default:h(()=>[c(H,{video:t},null,8,["video"])]),_:2},1032,["href"]),e("div",ve,[me,e("span",null,o(t.published_at?new Date(t.published_at).toLocaleDateString():""),1)]),c(r(b),{href:`/videos/${t.url}`,class:"my-1 block text-center text-md font-semibold text-black dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition"},{default:h(()=>[v(o(t.title),1)]),_:2},1032,["href"]),t.short?(l(),i("p",pe,o(t.short),1)):f("",!0)]))),128))])),e("div",ke,[e("button",{onClick:a[3]||(a[3]=t=>p(r(d).currentPage-1)),disabled:r(d).currentPage===1,class:"px-3 py-1 rounded bg-slate-100 dark:bg-slate-600 text-gray-900 dark:text-gray-100 border border-gray-400 dark:border-gray-200 disabled:opacity-50"}," « ",8,_e),e("input",{type:"number",value:r(d).currentPage,onChange:a[4]||(a[4]=t=>p(Number(t.target.value))),min:1,max:r(d).lastPage,class:"w-16 text-center px-3 py-1.5 rounded text-xs border border-gray-400 dark:border-gray-200 bg-slate-100 dark:bg-slate-600 text-gray-900 dark:text-white"},null,40,fe),e("span",ye,"/ "+o(r(d).lastPage),1),e("button",{onClick:a[5]||(a[5]=t=>p(r(d).currentPage+1)),disabled:r(d).currentPage===r(d).lastPage,class:"px-3 py-1 rounded bg-slate-100 dark:bg-slate-600 text-gray-900 dark:text-gray-100 border border-gray-400 dark:border-gray-200 disabled:opacity-50"}," » ",8,we)])],2)]),_:1},8,["title","can-login","can-register"]))}};export{Le as default};
