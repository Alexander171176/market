import{Q as g,l as c,e as f,o,w as x,f as t,m as a,n as v,t as i,F as k,v as y,q as B,p as C,E as r}from"./vendor-BEBDZ0sp.js";import{A as F}from"./AdminLayout-BFtYGzhC.js";import"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-CeR_jfIo.js";import"./ScrollButtons-DTZk2HGn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-fXlkiuVz.js";import"./LocaleSelectOption-CsmsByP5.js";import"./app-DWAbpmpS.js";import"./auth-image-XbvYdkSi.js";const w={class:"p-6 max-w-4xl mx-auto space-y-6"},S=t("h1",{class:"text-2xl font-bold"},"Резервное копирование базы данных",-1),N={key:0,class:"p-4 bg-green-100 text-green-800 rounded"},V={key:1,class:"p-4 bg-red-100 text-red-800 rounded"},z={class:"space-x-2"},A=["disabled"],D=["disabled"],E=["disabled"],L={class:"mt-6"},q=t("h2",{class:"text-lg font-semibold mb-2"},"Доступные бэкапы:",-1),K={key:0,class:"text-gray-500"},P={key:1,class:"divide-y border rounded"},Q=["onClick"],T={class:"text-sm text-gray-500 float-right"},ee={__name:"DatabaseBackup",setup($){var p,m;const d=g(),u=c(d.props.backups||[]),e=c(null),s=c(!1),n=c({success:(p=d.props.flash)==null?void 0:p.success,error:(m=d.props.flash)==null?void 0:m.error}),_=()=>{s.value=!0,r.post(route("admin.backup.create"),{},{onFinish:()=>s.value=!1,onSuccess:()=>r.reload()})},h=()=>{e.value&&(s.value=!0,r.post(route("admin.backup.restore"),{file:e.value},{onFinish:()=>s.value=!1,onSuccess:()=>r.reload()}))},b=()=>{e.value&&confirm("Вы уверены, что хотите удалить выбранный бэкап?")&&(s.value=!0,r.delete(route("admin.backup.delete"),{data:{file:e.value},onFinish:()=>s.value=!1,onSuccess:()=>{e.value=null,r.reload()}}))};return(j,G)=>(o(),f(F,{title:"Резервное копирование"},{default:x(()=>[t("div",w,[S,n.value.success?(o(),a("div",N,i(n.value.success),1)):v("",!0),n.value.error?(o(),a("div",V,i(n.value.error),1)):v("",!0),t("div",z,[t("button",{onClick:_,disabled:s.value,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," 📦 Создать бэкап ",8,A),t("button",{onClick:h,disabled:!e.value||s.value,class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"}," ♻️ Восстановить выбранный ",8,D),t("button",{onClick:b,disabled:!e.value||s.value,class:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"}," 🗑 Удалить выбранный ",8,E)]),t("div",L,[q,u.value.length===0?(o(),a("div",K,"Бэкапы не найдены")):(o(),a("ul",P,[(o(!0),a(k,null,y(u.value,l=>(o(),a("li",{key:l.name,onClick:H=>e.value=l.name,class:B(["px-4 py-2 cursor-pointer hover:bg-gray-100",e.value===l.name?"bg-gray-200 font-medium":""])},[C(i(l.name)+" ",1),t("span",T,i((l.size/1024).toFixed(1))+" KB ",1)],10,Q))),128))]))])])]),_:1}))}};export{ee as default};
