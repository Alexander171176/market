import{u as w,y as B,l as h,z as V,e as C,o as c,w as f,f as e,m as v,n as H,p as g,t as d,k as r,K as z,F as A,v as M,i as D}from"./vendor-BxBIhlnJ.js";import{a as m}from"./vendor-axios-jn5v1YEJ.js";import{A as F}from"./AdminLayout-CVVbnZvQ.js";import{T}from"./TitlePage-DSlumAVb.js";import"./vendor-lodash-BkjH9gY7.js";import"./ScrollButtons-cQZjvK3h.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-De0bHo2I.js";import"./LocaleSelectOption-C-FbJBp9.js";import"./app-T6LOBsMh.js";import"./auth-image-XbvYdkSi.js";const j={class:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-12xl mx-auto"},N={class:"p-4 bg-slate-50 dark:bg-slate-700 border border-blue-400 dark:border-blue-200 overflow-hidden shadow-lg shadow-gray-500 dark:shadow-slate-400 bg-opacity-95 dark:bg-opacity-95"},S={class:"sm:flex sm:justify-between sm:items-center mb-4"},$=["disabled"],L=e("svg",{class:"w-4 h-4 fill-current opacity-50 shrink-0 mr-1",viewBox:"0 0 16 16"},[e("path",{d:"M15 7H9V1c0-.6-.4-1-1-1S7 .4 7 1v6H1c-.6 0-1 .4-1 1s.4 1 1 1h6v6c0 .6.4 1 1 1s1-.4 1-1V9h6c.6 0 1-.4 1-1s-.4-1-1-1z"})],-1),R={key:0,class:"mb-4 w-full"},Z={class:"text-sm font-medium text-blue-700 dark:text-blue-200 mb-1"},P={class:"w-full h-3 bg-gray-300 dark:bg-gray-600 rounded-full overflow-hidden"},E={class:"text-slate-700 dark:text-slate-200 text-center text-md font-semibold mb-2"},I={key:0,class:"divide-y border rounded"},K={class:"font-medium text-sm text-amber-700 dark:text-amber-200"},q={class:"text-xs text-gray-500 dark:text-gray-400"},G={class:"flex items-center space-x-2"},J=["onClick","title"],O=e("svg",{class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"},[e("path",{d:"M5 20h14v-2H5m14-9h-4V3H9v6H5l7 7 7-7z"})],-1),Q=[O],U=["onClick","disabled","title"],W=e("svg",{class:"w-4 h-4 fill-current",viewBox:"0 0 24 24"},[e("path",{d:"M23.746,16.564l-1.62-.915-8.9,5.028a2.5,2.5,0,0,1-2.459,0l-8.9-5.029-1.62.915a.5.5,0,0,0,0,.872l11.5,6.5a.5.5,0,0,0,.492,0l11.5-6.5a.5.5,0,0,0,0-.872Z"}),e("path",{d:"M23.746,11.564l-1.62-.915-8.9,5.028a2.5,2.5,0,0,1-2.459,0l-8.9-5.029-1.62.915a.5.5,0,0,0,0,.872l11.5,6.5a.5.5,0,0,0,.492,0l11.5-6.5a.5.5,0,0,0,0-.872Z"}),e("path",{d:"M23.746,6.564l-11.5-6.5a.507.507,0,0,0-.492,0l-11.5,6.5a.5.5,0,0,0,0,.872l11.5,6.5a.5.5,0,0,0,.492,0l11.5-6.5a.5.5,0,0,0,0-.872Z"})],-1),X=[W],Y=["onClick","disabled","title"],ee=e("svg",{class:"w-4 h-4 fill-current",viewBox:"0 0 16 16"},[e("path",{d:"M5 7h2v6H5V7zm4 0h2v6H9V7zm3-6v2h4v2h-1v10c0 .6-.4 1-1 1H2c-.6 0-1-.4-1-1V5H0V3h4V1c0-.6.4-1 1-1h6c.6 0 1 .4 1 1zM6 2v1h4V2H6zm7 3H3v9h10V5z"})],-1),te=[ee],ae={key:1,class:"text-gray-500 text-center"},fe={__name:"FileBackup",setup(se){const{t}=w(),i=B(),a=h(!1),o=h(0),s=h(0),u=h([]),b=async()=>{try{const l=await m.get(route("admin.files.list"));u.value=l.data.archives||[]}catch{i.error(t("failedToLoadBackups")),u.value=[]}},k=async()=>{a.value=!0,s.value=1,o.value=25;try{await m.post(route("admin.files.create")),s.value=2,o.value=100,i.success(t("archiveCreated")),await b(),setTimeout(()=>{s.value=0,o.value=0,a.value=!1},3e3)}catch{i.error(t("archiveCreateFailed")),s.value=0,o.value=0,a.value=!1}},p=async l=>{if(l){a.value=!0,s.value=1,o.value=25;try{await m.post(route("admin.files.restore"),{file:l}),s.value=2,o.value=100,i.success(t("archiveRestored")),setTimeout(()=>{s.value=0,o.value=0,a.value=!1},3e3)}catch{i.error(t("archiveRestoreFailed")),s.value=0,o.value=0,a.value=!1}}},x=async l=>{if(!(!l||!confirm(t("backupConfirmDeleteBackup")))){a.value=!0;try{await m.delete(route("admin.files.delete"),{data:{file:l}}),i.success(t("backupDeleted")),await b()}catch{i.error(t("backupDeleteFailed"))}finally{a.value=!1}}},y=l=>{window.open(route("admin.files.download",{file:l}),"_blank")};return V(b),(l,le)=>(c(),C(F,{title:r(t)("fileBackup")},{header:f(()=>[D(T,null,{default:f(()=>[g(d(r(t)("fileBackup")),1)]),_:1})]),default:f(()=>[e("div",j,[e("div",N,[e("div",S,[e("button",{onClick:k,disabled:a.value,class:"flex items-center btn px-2 py-0.5 bg-sky-600 text-white text-sm font-semibold rounded-sm shadow-md transition-colors duration-300 ease-in-out hover:bg-sky-700 focus:bg-sky-700 focus:outline-none"},[L,g(" "+d(r(t)("createArchive")),1)],8,$)]),s.value>0?(c(),v("div",R,[e("div",Z,d(s.value===1?r(t)("archivingStep"):s.value===2?r(t)("archivingDone"):""),1),e("div",P,[e("div",{class:"h-full bg-blue-600 transition-all duration-500",style:z({width:`${o.value}%`})},null,4)])])):H("",!0),e("div",null,[e("h2",E,d(r(t)("availableArchives")),1),Array.isArray(u.value)&&u.value.length?(c(),v("ul",I,[(c(!0),v(A,null,M(u.value,n=>(c(),v("li",{key:n.name,class:"flex items-center justify-between px-3 py-1 bg-gray-100 hover:bg-gray-50 dark:bg-gray-700 dark:hover:bg-slate-800"},[e("div",null,[e("div",K,d(n.name),1),e("div",q,d((n.size/1024/1024).toFixed(2))+" MB ",1)]),e("div",G,[e("button",{onClick:_=>y(n.name),title:r(t)("download"),class:"w-8 h-8 flex items-center justify-center rounded-sm border border-slate-400 dark:border-slate-200 bg-indigo-100 hover:bg-indigo-200 dark:bg-indigo-700 dark:hover:bg-indigo-500 text-indigo-600 dark:text-slate-100 transition"},Q,8,J),e("button",{onClick:_=>p(n.name),disabled:a.value,title:r(t)("recover"),class:"w-8 h-8 flex items-center justify-center rounded-sm border border-slate-400 dark:border-slate-200 bg-teal-200 hover:bg-teal-300 dark:bg-teal-700 dark:hover:bg-teal-600 text-teal-600 dark:text-slate-100 transition"},X,8,U),e("button",{onClick:_=>x(n.name),disabled:a.value,title:r(t)("remove"),class:"w-8 h-8 flex items-center justify-center rounded-sm border border-slate-400 dark:border-slate-200 bg-red-200 hover:bg-red-300 dark:bg-red-700 dark:hover:bg-red-600 text-red-600 dark:text-slate-100 transition"},te,8,Y)])]))),128))])):(c(),v("div",ae,d(r(t)("noData")),1))])])])]),_:1},8,["title"]))}};export{fe as default};
