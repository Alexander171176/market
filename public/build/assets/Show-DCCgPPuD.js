import{u as F,Q as H,l as S,z as C,a_ as E,m as c,o as l,f as e,A as O,I as q,n as j,ay as Q,k as t,q as z,F as D,v as U,e as x,w as g,J as f,i as y,t as d,p as B,E as I,L as R,a4 as W,G,aU as J}from"./vendor-BxBIhlnJ.js";import{a as Y,_ as Z}from"./DefaultLayout-B9BWOsR_.js";import"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-BkjH9gY7.js";import"./ResponsiveNavLink-De0bHo2I.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LogoutButton-154m7eOH.js";import"./LocaleSelectOption-C-FbJBp9.js";import"./app-T6LOBsMh.js";const K={class:"flex flex-row items-center gap-4 mb-4"},X={class:"relative w-full max-w-lg mx-auto"},ee=["placeholder"],te=["title"],se=e("svg",{class:"w-4 h-4",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill-current text-slate-500 dark:text-slate-300",d:"M7 14c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7zM7 2C4.243 2 2 4.243 2 7s2.243 5 5 5 5-2.243 5-5-2.243-5-5-5z"}),e("path",{class:"fill-current text-slate-400 dark:text-slate-200",d:"M15.707 14.293L13.314 11.9a8.019 8.019 0 01-1.414 1.414l2.393 2.393a.997.997 0 001.414 0 .999.999 0 000-1.414z"})],-1),ae=[se],re={class:"flex justify-end items-center space-x-2"},oe=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),le=[oe],ne=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 12h16M4 18h16"})],-1),ie=[ne],de={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},ce={class:"overflow-hidden h-auto mb-2 rounded-md shadow-lg shadow-gray-400 dark:shadow-gray-900"},ue=["src"],ge={class:"text-gray-500 dark:text-gray-700"},he={class:"flex flex-col"},me={class:"text-md font-semibold text-black dark:text-white my-1"},be={class:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2"},_e={class:"text-xs font-semibold text-center text-slate-600 dark:text-slate-400 opacity-75"},fe={key:1,class:"space-y-4"},ve={class:"w-full sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-56 h-auto shrink-0 overflow-hidden rounded-md"},xe=["src"],pe={class:"text-slate-900 dark:text-slate-100"},ke={class:"flex flex-col flex-grow"},ye={class:"text-md font-semibold text-black dark:text-white my-1"},we={class:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-2"},$e={class:"text-xs font-semibold text-center text-slate-600 dark:text-slate-400 opacity-75"},Se={class:"flex items-center justify-center mt-6 space-x-2 text-sm font-medium"},Me=["disabled"],Ce=["value","max"],je={class:"text-gray-700 dark:text-gray-200"},Be=["disabled"],Ie={__name:"SectionArticles",props:{articles:Array,pagination:Object,baseUrl:String,search:String},setup(i){const{t:h}=F(),{appUrl:a}=H().props,m=r=>{if(!r)return"";const n=a.endsWith("/")?a.slice(0,-1):a,s=r.startsWith("/")?r.slice(1):r;return`${n}/storage/${s}`},u=i,v=S(u.search||""),w=()=>{const r=v.value.trim();I.get(u.baseUrl,{search:r},{preserveScroll:!0,preserveState:!1})},$=()=>{v.value="",I.get(u.baseUrl,{},{preserveScroll:!0,preserveState:!1})},b=r=>{const n=new Date(r),s=String(n.getDate()).padStart(2,"0"),_=String(n.getMonth()+1).padStart(2,"0"),M=n.getFullYear();return`${s}.${_}.${M}`},o=S("horizontal");C(()=>{localStorage.getItem("articleViewMode")==="grid"&&(o.value="grid")});const k=r=>{o.value=r,localStorage.setItem("articleViewMode",r)},p=r=>{r>=1&&r<=u.pagination.lastPage&&I.get(u.baseUrl,{page_articles:r},{preserveScroll:!0,preserveState:!1,only:["articles","pagination"]})};return C(()=>{const r=localStorage.getItem("scrollY");r!==null&&(window.scrollTo(0,parseInt(r)),localStorage.removeItem("scrollY"))}),E(()=>{localStorage.setItem("scrollY",window.scrollY)}),(r,n)=>(l(),c("div",null,[e("div",K,[e("form",{onSubmit:O(w,["prevent"]),class:"flex-grow"},[e("div",X,[q(e("input",{"onUpdate:modelValue":n[0]||(n[0]=s=>v.value=s),type:"text",placeholder:t(h)("searchByName"),class:"w-full pl-3 pr-16 py-1 bg-slate-100 dark:bg-slate-600 font-semibold text-sm text-slate-600 dark:text-slate-100 border border-slate-500 dark:border-slate-400 rounded-sm focus:outline-none focus:ring-1 focus:border-blue-300"},null,8,ee),[[Q,v.value]]),v.value?(l(),c("button",{key:0,type:"button",onClick:$,class:"absolute right-8 top-1/2 transform -translate-y-1/2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-800 border border-gray-900 dark:border-gray-100 py-0 px-1.5 text-slate-700 dark:text-white hover:text-red-500",title:"Очистить"}," ✕ ")):j("",!0),e("button",{type:"submit",class:"absolute right-1 top-1/2 transform -translate-y-1/2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-800 border border-gray-900 dark:border-gray-100 p-1",title:t(h)("searchByName")},ae,8,te)])],32),e("div",re,[e("button",{onClick:n[1]||(n[1]=s=>k("grid")),class:z(["p-1 border transition-colors duration-200 rounded",o.value==="grid"?"border-slate-400 dark:border-slate-200 text-red-400 dark:text-red-200":"border-slate-300 dark:border-slate-400 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 hover:border-slate-500 dark:hover:border-slate-500"])},le,2),e("button",{onClick:n[2]||(n[2]=s=>k("horizontal")),class:z(["p-1 border transition-colors duration-200 rounded",o.value==="horizontal"?"border-slate-400 dark:border-slate-200 text-red-400 dark:text-red-200":"border-slate-300 dark:border-slate-400 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 hover:border-slate-500 dark:hover:border-slate-500"])},ie,2)])]),o.value==="grid"?(l(),c("div",de,[(l(!0),c(D,null,U(i.articles,s=>{var _;return l(),c("div",{key:s.id,class:"p-2 rounded-sm shadow-sm overflow-hidden hover:bg-slate-50 dark:hover:bg-slate-800 hover:shadow-lg hover:shadow-gray-400 dark:hover:shadow-gray-700"},[e("div",ce,[s.img?(l(),x(t(f),{key:0,href:`/articles/${s.url}`},{default:g(()=>[e("img",{src:m(s.img),alt:"Article image",class:"w-full h-auto object-cover"},null,8,ue)]),_:2},1032,["href"])):(_=s.images)!=null&&_.length?(l(),x(t(f),{key:1,href:`/articles/${s.url}`},{default:g(()=>[y(Y,{images:s.images,link:`/articles/${s.url}`},null,8,["images","link"])]),_:2},1032,["href"])):(l(),x(t(f),{key:2,href:`/articles/${s.url}`,class:"flex items-center justify-center bg-gray-200 dark:bg-gray-400 h-32"},{default:g(()=>[e("span",ge,d(t(h)("noCurrentImage")),1)]),_:2},1032,["href"]))]),e("div",he,[e("h3",me,[y(t(f),{href:`/articles/${s.url}`,class:"hover:text-blue-600 dark:hover:text-blue-400"},{default:g(()=>[B(d(s.title),1)]),_:2},1032,["href"])]),e("p",be,d(s.short),1),e("div",_e,d(b(s.published_at)),1)])])}),128))])):(l(),c("div",fe,[(l(!0),c(D,null,U(i.articles,s=>{var _;return l(),c("div",{key:s.id,class:"col-span-full flex flex-col sm:flex-row items-start space-x-3 p-2 overflow-hidden hover:bg-slate-50 dark:hover:bg-slate-800 hover:shadow-lg hover:shadow-gray-400 dark:hover:shadow-gray-700"},[e("div",ve,[s.img?(l(),x(t(f),{key:0,href:`/articles/${s.url}`},{default:g(()=>[e("img",{src:m(s.img),alt:"Article image",class:"w-full h-auto object-cover"},null,8,xe)]),_:2},1032,["href"])):(_=s.images)!=null&&_.length?(l(),x(t(f),{key:1,href:`/articles/${s.url}`},{default:g(()=>[y(Y,{images:s.images,link:`/articles/${s.url}`},null,8,["images","link"])]),_:2},1032,["href"])):(l(),x(t(f),{key:2,href:`/articles/${s.url}`,class:"flex items-center justify-center bg-gray-200 dark:bg-gray-400 h-32"},{default:g(()=>[e("span",pe,d(t(h)("noCurrentImage")),1)]),_:2},1032,["href"]))]),e("div",ke,[e("h3",ye,[y(t(f),{href:`/articles/${s.url}`,class:"hover:text-blue-600 dark:hover:text-blue-400"},{default:g(()=>[B(d(s.title),1)]),_:2},1032,["href"])]),e("p",we,d(s.short),1),e("div",$e,d(b(s.published_at)),1)])])}),128))])),e("div",Se,[e("button",{onClick:n[3]||(n[3]=s=>p(i.pagination.currentPage-1)),disabled:i.pagination.currentPage===1,class:"px-3 py-1 rounded bg-slate-100 dark:bg-slate-600 text-gray-900 dark:text-gray-100 border border-gray-400 dark:border-gray-200 disabled:opacity-50"}," « ",8,Me),e("input",{type:"number",value:i.pagination.currentPage,onChange:n[4]||(n[4]=s=>p(Number(s.target.value))),min:1,max:i.pagination.lastPage,class:"w-16 text-center px-3 py-1.5 border border-gray-400 dark:border-gray-200 rounded bg-slate-100 dark:bg-slate-600 text-gray-900 dark:text-white text-xs"},null,40,Ce),e("span",je,"/ "+d(i.pagination.lastPage),1),e("button",{onClick:n[5]||(n[5]=s=>p(i.pagination.currentPage+1)),disabled:i.pagination.currentPage===i.pagination.lastPage,class:"px-3 py-1 rounded bg-slate-100 dark:bg-slate-600 text-gray-900 dark:text-gray-100 border border-gray-400 dark:border-gray-200 disabled:opacity-50"}," » ",8,Be)])]))}},ze={key:0,class:"mt-8 w-full overflow-hidden"},De={class:"w-full transition-opacity duration-700"},Ue=["src","alt","title"],Ve=["src","alt","title"],Pe={key:2,src:"/banner_images/default-image.png",alt:"Нет изображения",class:"w-full h-auto object-contain mx-auto opacity-50 transition-transform duration-500"},Le={__name:"MainBannerSlider",props:{banners:{type:Array,required:!0}},setup(i){const h=i,a=S(0),m=S(!1);let u=null;const v=()=>{w(),h.banners.length>1&&(u=setInterval(()=>{m.value||(a.value=(a.value+1)%h.banners.length)},5e3))},w=()=>{u&&(clearInterval(u),u=null)};return C(v),E(w),($,b)=>i.banners.length?(l(),c("div",ze,[e("div",{class:"relative w-full",onMouseenter:b[0]||(b[0]=o=>m.value=!0),onMouseleave:b[1]||(b[1]=o=>m.value=!1)},[(l(!0),c(D,null,U(i.banners,(o,k)=>{var p,r,n,s,_,M,V,P;return l(),c("div",{key:o.id},[q(e("div",De,[o.link?(l(),x(t(f),{key:0,href:o.link,class:"block w-full"},{default:g(()=>{var L,N,A,T;return[e("img",{src:((N=(L=o.images)==null?void 0:L[0])==null?void 0:N.webp_url)||((T=(A=o.images)==null?void 0:A[0])==null?void 0:T.url)||"/images/no-image.svg",alt:o.title||"",title:o.title||"",class:"w-full h-auto object-contain mx-auto transition-transform duration-500"},null,8,Ue)]}),_:2},1032,["href"])):(r=(p=o.images)==null?void 0:p[0])!=null&&r.webp_url||(s=(n=o.images)==null?void 0:n[0])!=null&&s.url?(l(),c("img",{key:1,src:((M=(_=o.images)==null?void 0:_[0])==null?void 0:M.webp_url)||((P=(V=o.images)==null?void 0:V[0])==null?void 0:P.url),alt:o.title||"",title:o.title||"",class:"w-full h-auto object-contain mx-auto transition-transform duration-500"},null,8,Ve)):(l(),c("img",Pe))],512),[[R,a.value===k]])])}),128))],32)])):j("",!0)}},Ne=["content"],Ae=["content"],Te=["content"],Ye=["content"],Fe=["content"],He=e("meta",{property:"og:type",content:"website"},null,-1),Ee=["content"],qe=["content"],Oe=["content"],Qe=e("meta",{name:"twitter:card",content:"summary_large_image"},null,-1),Re=["content"],We=["content"],Ge=["content"],Je=["content"],Ze=["content"],Ke=["content"],Xe=["content"],et={class:"text-sm","aria-label":"Breadcrumb"},tt={class:"list-reset flex items-center space-x-0"},st=e("li",null,[e("span",{class:"mx-1 text-slate-900 dark:text-slate-100"},"/")],-1),at={class:"text-slate-900 dark:text-slate-100"},rt={class:"flex items-center justify-center my-4 text-center font-bolder text-xl text-slate-900 dark:text-slate-100"},ot=["innerHTML"],lt=["title"],_t={__name:"Show",setup(i){const{t:h}=F(),{rubric:a,sectionBanners:m,articles:u,pagination:v,locale:w,siteSettings:$}=H().props,b=S(!1);let o;const k=()=>{b.value=document.documentElement.classList.contains("dark")};C(()=>{k(),o=new MutationObserver(k),o.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}),W(()=>{o&&o.disconnect()});const p=G(()=>b.value?$.PublicDarkBackgroundColor:$.PublicLightBackgroundColor);return(r,n)=>(l(),x(Z,{title:t(a).title,"can-login":r.$page.props.canLogin,"can-register":r.$page.props.canRegister},{default:g(()=>{var s;return[y(t(J),null,{default:g(()=>[e("title",null,d(t(a).title),1),e("meta",{name:"title",content:t(a).title||""},null,8,Ne),e("meta",{name:"keywords",content:t(a).meta_keywords||""},null,8,Ae),e("meta",{name:"description",content:t(a).meta_desc||""},null,8,Te),e("meta",{property:"og:title",content:t(a).title||""},null,8,Ye),e("meta",{property:"og:description",content:t(a).meta_desc||""},null,8,Fe),He,e("meta",{property:"og:url",content:`/rubrics/${t(a).url}`},null,8,Ee),e("meta",{property:"og:image",content:t(a).icon||""},null,8,qe),e("meta",{property:"og:locale",content:t(a).locale||"ru_RU"},null,8,Oe),Qe,e("meta",{name:"twitter:title",content:t(a).title||""},null,8,Re),e("meta",{name:"twitter:description",content:t(a).meta_desc||""},null,8,We),e("meta",{name:"twitter:image",content:t(a).icon||""},null,8,Ge),e("meta",{name:"DC.title",content:t(a).title||""},null,8,Je),e("meta",{name:"DC.description",content:t(a).meta_desc||""},null,8,Ze),e("meta",{name:"DC.identifier",content:`/rubrics/${t(a).url}`},null,8,Ke),e("meta",{name:"DC.language",content:t(a).locale||"ru"},null,8,Xe)]),_:1}),e("div",{class:z(["flex-1 p-4",[p.value]])},[e("nav",et,[e("ol",tt,[e("li",null,[y(t(f),{href:"/",class:"hover:underline text-slate-900 dark:text-slate-100"},{default:g(()=>[B(d(t(h)("home")),1)]),_:1})]),st,e("li",at,d(t(a).title),1)])]),e("h1",rt,[t(a).icon?(l(),c("span",{key:0,class:"flex justify-center",innerHTML:t(a).icon},null,8,ot)):j("",!0),B(" "+d(t(a).title)+" ",1),e("div",{class:"ml-2 w-6 h-5 flex items-center justify-center rounded-full text-[9px] font-semibold text-black dark:text-white bg-slate-100 dark:bg-slate-700",title:t(h)("views")},d(t(a).views),9,lt)]),y(Ie,{articles:t(u).data,pagination:t(v),"base-url":`/${t(w)}/rubrics/${t(a).url}`,search:((s=r.$page.props.filters)==null?void 0:s.search)??""},null,8,["articles","pagination","base-url","search"]),t(m)&&t(m).length?(l(),x(Le,{key:0,banners:t(m)},null,8,["banners"])):j("",!0)],2)]}),_:1},8,["title","can-login","can-register"]))}};export{_t as default};
